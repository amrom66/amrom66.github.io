<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="linjinbao">
  <meta name="description" content="打工人日记">
  <meta name="keywords" content="博客 个人 日记">
  
  <link rel="prev" href="https://linjinbao.github.io/2019/2019-12-24-yum%E6%95%B0%E6%8D%AE%E5%BA%93/" />
  <link rel="next" href="https://linjinbao.github.io/2019/2019-12-26-hdfs%E5%AD%A6%E4%B9%A0/" />
  <link rel="canonical" href="https://linjinbao.github.io/2019/2019-12-25-hive%E5%AD%A6%E4%B9%A0/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           hive学习01-环境搭建 | 打工人日记
       
  </title>
  <meta name="title" content="hive学习01-环境搭建 | 打工人日记">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/linjinbao.github.io"
    },
    "articleSection" : "posts",
    "name" : "hive学习01-环境搭建",
    "headline" : "hive学习01-环境搭建",
    "description" : "hive学习01-环境搭建 环境准备：\n jdk 自己手动放置在一个不含空格的目录，并配置好JAVA_HOME hadoop安装包 hadoop-2.7.7 http:\/\/mirror.bit.edu.cn\/apache\/hadoop\/common\/hadoop-2.7.7\/hadoop-2.7.7.tar.gz hive 安装包hive-2.1.1 http:\/\/archive.apache.org\/dist\/hive\/hive-2.1.1\/apache-hive-2.1.1-bin.tar.gz  环境准备玩本人目录如下：\n\x26ndash;D:\\hadoop\n​ \x26ndash;hadoop-2.7.7\n​ \x26ndash;jdk1.8.0_171\n​ \x26ndash;apache-hive-2.1.1-bin\nhadoop环境搭建 第零步：配置环境变量：HADOOP_HOME=D:\\hadoop\\hadoop-2.7.7\n第一步：修改配置文件：\n core-site.xml  \x26lt;configuration\x26gt; \x26lt;property\x26gt; \x26lt;name\x26gt;fs.defaultFS\x26lt;\/name\x26gt; \x26lt;value\x26gt;hdfs:\/\/localhost:9000\x26lt;\/value\x26gt; \x26lt;\/property\x26gt; \x26lt;\/configuration\x26gt;  hdfs-site.xml  \x26lt;configuration\x26gt; \x26lt;property\x26gt; \x26lt;name\x26gt;dfs.replication\x26lt;\/name\x26gt; \x26lt;value\x26gt;1\x26lt;\/value\x26gt; \x26lt;\/property\x26gt; \x26lt;property\x26gt; \x26lt;name\x26gt;dfs.namenode.name.dir\x26lt;\/name\x26gt; \x26lt;value\x26gt;file:\/hadoop\/data\/dfs\/namenode\x26lt;\/value\x26gt; \x26lt;\/property\x26gt; \x26lt;property\x26gt; \x26lt;name\x26gt;dfs.datanode.data.dir\x26lt;\/name\x26gt; \x26lt;value\x26gt;file:\/hadoop\/data\/dfs\/datanode\x26lt;\/value\x26gt; \x26lt;\/property\x26gt; \x26lt;\/configuration\x26gt;  mapred-site.xml（mapred-site.xml.template修改而来）  \x26lt;configuration\x26gt; \x26lt;property\x26gt; \x26lt;name\x26gt;mapreduce.framework.name\x26lt;\/name\x26gt; \x26lt;value\x26gt;yarn\x26lt;\/value\x26gt; \x26lt;\/property\x26gt; \x26lt;\/configuration\x26gt;  yarn-site.xml  \x26lt;configuration\x26gt; \x26lt;property\x26gt; \x26lt;name\x26gt;yarn.nodemanager.aux-services\x26lt;\/name\x26gt; \x26lt;value\x26gt;mapreduce_shuffle\x26lt;\/value\x26gt; \x26lt;\/property\x26gt; \x26lt;property\x26gt; \x26lt;name\x26gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class\x26lt;\/name\x26gt; \x26lt;value\x26gt;org.apache.hadoop.mapred.ShuffleHandler\x26lt;\/value\x26gt; \x26lt;\/property\x26gt; \x26lt;\/configuration\x26gt;  hadoop-env.",
    "inLanguage" : "en-us",
    "author" : "linjinbao",
    "creator" : "linjinbao",
    "publisher": "linjinbao",
    "accountablePerson" : "linjinbao",
    "copyrightHolder" : "linjinbao",
    "copyrightYear" : "2019",
    "datePublished": "2019-12-25 00:00:00 \x2b0000 UTC",
    "dateModified" : "2019-12-25 00:00:00 \x2b0000 UTC",
    "url" : "https:\/\/linjinbao.github.io\/2019\/2019-12-25-hive%E5%AD%A6%E4%B9%A0\/",
    "wordCount" : "373",
    "keywords" : [ "hadoop", "打工人日记"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://linjinbao.github.io">打工人日记</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">博客</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
                <a class="menu-item" href="/2020/about/" title="关于">关于</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://linjinbao.github.io">打工人日记</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">博客</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
                <a class="menu-item" href="/2020/about/" title="关于">关于</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">hive学习01-环境搭建</h1>
        <div class="post-meta">
                作者： <a itemprop="name" href="https://linjinbao.github.io" rel="author">linjinbao</a> 时间： 
                <span class="post-time">
                 <time datetime=25129-12-25 itemprop="datePublished">December 25, 2019</time>
                </span>
                分类： 
                
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <h1 id="hive学习01-环境搭建">hive学习01-环境搭建</h1>
<p>环境准备：</p>
<ul>
<li><code>jdk</code> 自己手动放置在一个不含空格的目录，并配置好<code>JAVA_HOME</code></li>
<li><code>hadoop</code>安装包 <code>hadoop-2.7.7</code> <a href="http://mirror.bit.edu.cn/apache/hadoop/common/hadoop-2.7.7/hadoop-2.7.7.tar.gz">http://mirror.bit.edu.cn/apache/hadoop/common/hadoop-2.7.7/hadoop-2.7.7.tar.gz</a></li>
<li><code>hive</code> 安装包<code>hive-2.1.1</code> <a href="http://archive.apache.org/dist/hive/hive-2.1.1/apache-hive-2.1.1-bin.tar.gz">http://archive.apache.org/dist/hive/hive-2.1.1/apache-hive-2.1.1-bin.tar.gz</a></li>
</ul>
<p>环境准备玩本人目录如下：</p>
<p>&ndash;D:\hadoop</p>
<p>​ &ndash;hadoop-2.7.7</p>
<p>​ &ndash;jdk1.8.0_171</p>
<p>​ &ndash;apache-hive-2.1.1-bin</p>
<h2 id="hadoop环境搭建">hadoop环境搭建</h2>
<p>第零步：配置环境变量：<code>HADOOP_HOME=D:\hadoop\hadoop-2.7.7</code></p>
<p>第一步：修改配置文件：</p>
<ul>
<li>core-site.xml</li>
</ul>
<pre><code class="language-markup" data-lang="markup">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;
    &lt;/property&gt;    
&lt;/configuration&gt;
</code></pre><ul>
<li>hdfs-site.xml</li>
</ul>
<pre><code class="language-markup" data-lang="markup">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.replication&lt;/name&gt;
        &lt;value&gt;1&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;    
        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;    
        &lt;value&gt;file:/hadoop/data/dfs/namenode&lt;/value&gt;    
    &lt;/property&gt;    
    &lt;property&gt;    
        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;    
        &lt;value&gt;file:/hadoop/data/dfs/datanode&lt;/value&gt;  
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><ul>
<li>mapred-site.xml（mapred-site.xml.template修改而来）</li>
</ul>
<pre><code class="language-markup" data-lang="markup">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><ul>
<li>yarn-site.xml</li>
</ul>
<pre><code class="language-markup" data-lang="markup">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&lt;/name&gt;
        &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><ul>
<li>hadoop-env.cmd</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">set JAVA_HOME=D:\hadoop\jdk1.8.0_171
</code></pre></div><p>第二步：替换bin目录部分文件</p>
<p>从<code>https://github.com/steveloughran/winutils</code>下载<code>hadoop-2.8.1</code>，将<code>hadoop-2.8.1</code>文件夹内所有内容放入<code>D:\hadoop\hadoop-2.7.7\bin</code>，如有重复，则覆盖</p>
<p>第三步：进入<code>D:\hadoop\hadoop-2.7.7\bin</code>目录，执行hdfs初始化命令<code>hdfs namenode -format</code></p>
<p>第四步：进入<code>D:\hadoop\hadoop-2.7.7\sbin</code>目录，执行启动命令，<code>start-all.cmd</code></p>
<p>这时，一般情况下，就会启动4个命令行窗口，使用<code>jps</code>命令可以查看是否启动</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">D:\hadoop&gt;jps
4912 RunJar
14532 Jps
23508 RunJar    ##1.
6036 DataNode    ##2
19800 ResourceManager    ##3.
21436 NameNode        ##4.
6556 NodeMana    ger
</code></pre></div><p>至此hadoop环境搭建完成</p>
<h2 id="hive环境搭建">hive环境搭建</h2>
<p>第一步：准备工作</p>
<ul>
<li>从maven中下载<code>mysql-connector-java-5.1.37.jar</code>（或其他jar版本）放在hive目录下的lib文件夹</li>
<li>配置hive环境变量，HIVE_HOME=D:\hadoop\apache-hive-2.1.1-bin</li>
</ul>
<p>第二步：配置文件：</p>
<ul>
<li>修改 hive-env.sh</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">export HADOOP_HOME=D:\hadoop\hadoop-2.7.7
export HIVE_CONF_DIR=D:\hadoop\apache-hive-2.1.1-bin\conf
export HIVE_AUX_JARS_PATH=D:\hadoop\apache-hive-2.1.1-bin\lib
</code></pre></div><ul>
<li>修改hive-site.xml</li>
</ul>
<pre><code class="language-markup" data-lang="markup">&lt;!--修改的配置--&gt;  

&lt;property&gt;  

&lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;  

&lt;!--hive的数据存储目录，指定的位置在hdfs上的目录--&gt;  

&lt;value&gt;/user/hive/warehouse&lt;/value&gt;  

&lt;description&gt;location of default database for the warehouse&lt;/description&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;hive.exec.scratchdir&lt;/name&gt;  

&lt;!--hive的临时数据目录，指定的位置在hdfs上的目录--&gt;  

&lt;value&gt;/tmp/hive&lt;/value&gt;  

&lt;description&gt;HDFS root scratch dir for Hive jobs which gets created with write all (733) permission. For each connecting user, an HDFS scratch dir: ${hive.exec.scratchdir}/&lt;username&gt; is created, with ${hive.scratch.dir.permission}.&lt;/description&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;hive.exec.local.scratchdir&lt;/name&gt;  

&lt;!--本地目录--&gt;  

&lt;value&gt;D:/hadoop/apache-hive-2.1.1-bin/hive/iotmp&lt;/value&gt;  

&lt;description&gt;Local scratch space for Hive jobs&lt;/description&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;hive.downloaded.resources.dir&lt;/name&gt;  

&lt;!--本地目录--&gt;  

&lt;value&gt;D:/hadoop/apache-hive-2.1.1-bin/hive/iotmp&lt;/value&gt;  

&lt;description&gt;Temporary local directory for added resources in the remote file system.&lt;/description&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;hive.querylog.location&lt;/name&gt;  

&lt;!--本地目录--&gt;  

&lt;value&gt;D:/hadoop/apache-hive-2.1.1-bin/hive/iotmp&lt;/value&gt;  

&lt;description&gt;Location of Hive run time structured log file&lt;/description&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;hive.server2.logging.operation.log.location&lt;/name&gt;  

&lt;value&gt;D:/hadoop/apache-hive-2.1.1-bin/hive/iotmp/operation_logs&lt;/value&gt;  

&lt;description&gt;Top level directory where operation logs are stored if logging functionality is enabled&lt;/description&gt;  

&lt;/property&gt;  

&lt;!--新增的配置--&gt;  

&lt;property&gt;  

&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;  

&lt;value&gt;jdbc:mysql://localhost:3306/hive?characterEncoding=UTF-8&lt;/value&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;  

&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;  

&lt;value&gt;root&lt;/value&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;  

&lt;value&gt;***&lt;/value&gt;  

&lt;/property&gt;  

&lt;!-- 解决 Required table missing : &quot;`VERSION`&quot; in Catalog &quot;&quot; Schema &quot;&quot;. DataNucleus requires this table to perform its persistence operations. Either your MetaData is incorrect, or you need to enable &quot;datanucleus.autoCreateTables&quot;  --&gt;  

&lt;property&gt;  

&lt;name&gt;datanucleus.autoCreateSchema&lt;/name&gt;  

&lt;value&gt;true&lt;/value&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;datanucleus.autoCreateTables&lt;/name&gt;  

&lt;value&gt;true&lt;/value&gt;  

&lt;/property&gt;  

&lt;property&gt;  

&lt;name&gt;datanucleus.autoCreateColumns&lt;/name&gt;  

&lt;value&gt;true&lt;/value&gt;  

&lt;/property&gt;  

&lt;!-- 解决 Caused by: MetaException(message:Version information not found in metastore. )  --&gt;  

&lt;property&gt;    

&lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;    

&lt;value&gt;false&lt;/value&gt;    

&lt;description&gt;    

    Enforce metastore schema version consistency.    

    True: Verify that version information stored in metastore matches with one from Hive jars.  Also disable automatic    

          schema migration attempt. Users are required to manully migrate schema after Hive upgrade which ensures    

          proper metastore schema migration. (Default)    

    False: Warn if the version information stored in metastore doesn't match with one from in Hive jars.    

&lt;/description&gt;    

&lt;/property&gt;
</code></pre><p>第三步：MySQL设置</p>
<p><code>create database hive default character set latin1;</code></p>
<p>！此处如果使用UTF-8建库的话，会出现<code>Index column size too large. The maximum column size is 767 bytes.</code>报错</p>
<p>第四步：启动metastore服务：<code>hive --service metastore</code></p>
<p>第五步：启动Hive：hive</p>
<p>至此，hive安装部署完成</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>linjinbao </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://linjinbao.github.io/2019/2019-12-25-hive%E5%AD%A6%E4%B9%A0/>https://linjinbao.github.io/2019/2019-12-25-hive%E5%AD%A6%E4%B9%A0/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>标签: 
            
            <span class="tag"><a href="https://linjinbao.github.io/tags/hadoop/">
                    #hadoop</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">返回</a></span> · 
                <span><a href="https://linjinbao.github.io">主页</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://linjinbao.github.io/2019/2019-12-24-yum%E6%95%B0%E6%8D%AE%E5%BA%93/" class="prev" rel="prev" title="yum 重建数据库解决报错"><i class="iconfont icon-left"></i>&nbsp;yum 重建数据库解决报错</a>
         
        
        <a href="https://linjinbao.github.io/2019/2019-12-26-hdfs%E5%AD%A6%E4%B9%A0/" class="next" rel="next" title="hadoop-hdfs学习">hadoop-hdfs学习&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
		  
		  
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'c0ed0ca0e3d9634636f2',
    clientSecret: '6d1b474de5dd1f935ee25f81965974928704e193',
    repo: 'linjinbao.github.io',
    owner: 'linjinbao666',
    admin: ['linjinbao666'],
    id: location.pathname, 
    distractionFreeMode: false 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>


    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2021</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://linjinbao.github.io">linjinbao</a>  </span> 
         

         
		 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
