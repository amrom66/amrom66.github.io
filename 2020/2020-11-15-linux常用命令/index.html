<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="linjinbao">
  <meta name="description" content="打工人日记">
  <meta name="keywords" content="博客 个人 日记">
  
  <link rel="prev" href="https://linjinbao.github.io/2020/2020-11-10-nginx%E6%8B%A6%E6%88%AA%E7%A9%BAreffer/" />
  <link rel="next" href="https://linjinbao.github.io/2020/2020-11-16-containerd%E6%89%8B%E5%8A%A8%E5%AF%BC%E5%85%A5%E9%95%9C%E5%83%8F/" />
  <link rel="canonical" href="https://linjinbao.github.io/2020/2020-11-15-linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           linux常用命令 | 打工人日记
       
  </title>
  <meta name="title" content="linux常用命令 | 打工人日记">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/linjinbao.github.io"
    },
    "articleSection" : "posts",
    "name" : "linux常用命令",
    "headline" : "linux常用命令",
    "description" : "原文地址: https:\/\/github.com\/xjh22222228\/linux-manual\n目录  文件操作  head tail ls pwd wc find mkdir mktemp chattr more paste stat grep touch cd rm rmdir cp cat mv locate open source tree ln file   系统管理  nohup watch ping which shutdown reboot uptime crontab uname ifconfig whereis chmod lsof chown systemctl service free type alias time jobs \x26amp;   系统进程  ps pstree top netstat kill killall   用户管理  useradd userdel passwd chpasswd chsh chfn usermod users who w last su whoami   环境变量  printenv set export unset   压缩、解压  zip unzip gzip bzip2 tar   加解密  md5sum base64   网络  ssh wget curl scp rsync   磁盘  df du   包管理  yum apt-get   其他  目录名称含义 重定向输入和输出 管道 echo date man sleep history xargs cal expr bc timeout exit vim basename read tee clear    文件操作 head 显示文件的头部内容，如果不指定参数默认显示10行",
    "inLanguage" : "en-us",
    "author" : "linjinbao",
    "creator" : "linjinbao",
    "publisher": "linjinbao",
    "accountablePerson" : "linjinbao",
    "copyrightHolder" : "linjinbao",
    "copyrightYear" : "2020",
    "datePublished": "2020-11-15 00:00:00 \x2b0000 UTC",
    "dateModified" : "2020-11-15 00:00:00 \x2b0000 UTC",
    "url" : "https:\/\/linjinbao.github.io\/2020\/2020-11-15-linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4\/",
    "wordCount" : "4652",
    "keywords" : [  "打工人日记"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://linjinbao.github.io">打工人日记</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">博客</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
                <a class="menu-item" href="/2020/about/" title="关于">关于</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://linjinbao.github.io">打工人日记</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">博客</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
                <a class="menu-item" href="/2020/about/" title="关于">关于</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">linux常用命令</h1>
        <div class="post-meta">
                作者： <a itemprop="name" href="https://linjinbao.github.io" rel="author">linjinbao</a> 时间： 
                <span class="post-time">
                 <time datetime=15119-11-15 itemprop="datePublished">November 15, 2020</time>
                </span>
                分类： 
                
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <p><a href="https://github.com/xjh22222228/linux-manual.git">原文地址</a>: <a href="https://github.com/xjh22222228/linux-manual">https://github.com/xjh22222228/linux-manual</a></p>
<h1 id="目录">目录</h1>
<ul>
<li><a href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C">文件操作</a>
<ul>
<li><a href="#head">head</a></li>
<li><a href="#tail">tail</a></li>
<li><a href="#ls">ls</a></li>
<li><a href="#pwd">pwd</a></li>
<li><a href="#wc">wc</a></li>
<li><a href="#find">find</a></li>
<li><a href="#mkdir">mkdir</a></li>
<li><a href="#mktemp">mktemp</a></li>
<li><a href="#chattr">chattr</a></li>
<li><a href="#more">more</a></li>
<li><a href="#paste">paste</a></li>
<li><a href="#stat">stat</a></li>
<li><a href="#grep">grep</a></li>
<li><a href="#touch">touch</a></li>
<li><a href="#cd">cd</a></li>
<li><a href="#rm">rm</a></li>
<li><a href="#rmdir">rmdir</a></li>
<li><a href="#cp">cp</a></li>
<li><a href="#cat">cat</a></li>
<li><a href="#mv">mv</a></li>
<li><a href="#locate">locate</a></li>
<li><a href="#open">open</a></li>
<li><a href="#source">source</a></li>
<li><a href="#tree">tree</a></li>
<li><a href="#ln">ln</a></li>
<li><a href="#file">file</a></li>
</ul>
</li>
<li><a href="#%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86">系统管理</a>
<ul>
<li><a href="#nohup">nohup</a></li>
<li><a href="#watch">watch</a></li>
<li><a href="#ping">ping</a></li>
<li><a href="#which">which</a></li>
<li><a href="#shutdown">shutdown</a></li>
<li><a href="#reboot">reboot</a></li>
<li><a href="#uptime">uptime</a></li>
<li><a href="#crontab">crontab</a></li>
<li><a href="#uname">uname</a></li>
<li><a href="#ifconfig">ifconfig</a></li>
<li><a href="#whereis">whereis</a></li>
<li><a href="#chmod">chmod</a></li>
<li><a href="#lsof">lsof</a></li>
<li><a href="#chown">chown</a></li>
<li><a href="#systemctl">systemctl</a></li>
<li><a href="#service">service</a></li>
<li><a href="#free">free</a></li>
<li><a href="#type">type</a></li>
<li><a href="#alias">alias</a></li>
<li><a href="#time">time</a></li>
<li><a href="#jobs">jobs</a></li>
<li><a href="#&amp;">&amp;</a></li>
</ul>
</li>
<li><a href="#%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B">系统进程</a>
<ul>
<li><a href="#ps">ps</a></li>
<li><a href="#pstree">pstree</a></li>
<li><a href="#top">top</a></li>
<li><a href="#netstat">netstat</a></li>
<li><a href="#kill">kill</a></li>
<li><a href="#killall">killall</a></li>
</ul>
</li>
<li><a href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86">用户管理</a>
<ul>
<li><a href="#useradd">useradd</a></li>
<li><a href="#userdel">userdel</a></li>
<li><a href="#passwd">passwd</a></li>
<li><a href="#chpasswd">chpasswd</a></li>
<li><a href="#chsh">chsh</a></li>
<li><a href="#chfn">chfn</a></li>
<li><a href="#usermod">usermod</a></li>
<li><a href="#users">users</a></li>
<li><a href="#who">who</a></li>
<li><a href="#w">w</a></li>
<li><a href="#last">last</a></li>
<li><a href="#su">su</a></li>
<li><a href="#whoami">whoami</a></li>
</ul>
</li>
<li><a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">环境变量</a>
<ul>
<li><a href="#printenv">printenv</a></li>
<li><a href="#set">set</a></li>
<li><a href="#export">export</a></li>
<li><a href="#unset">unset</a></li>
</ul>
</li>
<li><a href="#%E5%8E%8B%E7%BC%A9%E3%80%81%E8%A7%A3%E5%8E%8B">压缩、解压</a>
<ul>
<li><a href="#zip">zip</a></li>
<li><a href="#unzip">unzip</a></li>
<li><a href="#gzip">gzip</a></li>
<li><a href="#bzip2">bzip2</a></li>
<li><a href="#tar">tar</a></li>
</ul>
</li>
<li><a href="#%E5%8A%A0%E8%A7%A3%E5%AF%86">加解密</a>
<ul>
<li><a href="#md5sum">md5sum</a></li>
<li><a href="#base64">base64</a></li>
</ul>
</li>
<li><a href="#%E7%BD%91%E7%BB%9C">网络</a>
<ul>
<li><a href="#ssh">ssh</a></li>
<li><a href="#wget">wget</a></li>
<li><a href="#curl">curl</a></li>
<li><a href="#scp">scp</a></li>
<li><a href="#rsync">rsync</a></li>
</ul>
</li>
<li><a href="#%E7%A3%81%E7%9B%98">磁盘</a>
<ul>
<li><a href="#df">df</a></li>
<li><a href="#du">du</a></li>
</ul>
</li>
<li><a href="#%E5%8C%85%E7%AE%A1%E7%90%86">包管理</a>
<ul>
<li><a href="#yum">yum</a></li>
<li><a href="#apt-get">apt-get</a></li>
</ul>
</li>
<li><a href="#%E5%85%B6%E4%BB%96">其他</a>
<ul>
<li><a href="#%E7%9B%AE%E5%BD%95%E5%90%8D%E7%A7%B0%E5%90%AB%E4%B9%89">目录名称含义</a></li>
<li><a href="#%E9%87%8D%E5%AE%9A%E5%90%91%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA">重定向输入和输出</a></li>
<li><a href="#%E7%AE%A1%E9%81%93">管道</a></li>
<li><a href="#echo">echo</a></li>
<li><a href="#date">date</a></li>
<li><a href="#man">man</a></li>
<li><a href="#sleep">sleep</a></li>
<li><a href="#history">history</a></li>
<li><a href="#xargs">xargs</a></li>
<li><a href="#cal">cal</a></li>
<li><a href="#expr">expr</a></li>
<li><a href="#bc">bc</a></li>
<li><a href="#timeout">timeout</a></li>
<li><a href="#exit">exit</a></li>
<li><a href="#vim">vim</a></li>
<li><a href="#basename">basename</a></li>
<li><a href="#read">read</a></li>
<li><a href="#tee">tee</a></li>
<li><a href="#clear">clear</a></li>
</ul>
</li>
</ul>
<h1 id="文件操作">文件操作</h1>
<h2 id="head">head</h2>
<p>显示文件的头部内容，如果不指定参数默认显示10行</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 显示前10行内容</span>
head README.md

<span style="color:#75715e"># 或者显示多个文件</span>
head README.md package.json

<span style="color:#75715e"># -n 指定显示行数</span>
head -n <span style="color:#ae81ff">100</span> README.md
</code></pre></div><h2 id="tail">tail</h2>
<p>显示文件的末尾部分</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 默认显示末尾10行</span>
tail README.md

<span style="color:#75715e"># -n 指定显示末尾20行</span>
tail -n <span style="color:#ae81ff">20</span> README.md

<span style="color:#75715e"># 实时监听README.md文件变化</span>
tail -f README.md

<span style="color:#75715e"># 根据文件名进行追踪, 如果删除后创建相同的文件名会继续追踪</span>
tail -F README.md

<span style="color:#75715e"># 显示文件的最后10个字符</span>
tail -c README.md
</code></pre></div><h2 id="ls">ls</h2>
<p>显示当前目录下的文件和目录，输出的列表是按字母排序 (某些发行版可能不一样)。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 显示当前目录列表</span>
ls

<span style="color:#75715e"># 显示目录列表的详细信息</span>
ls -l

<span style="color:#75715e"># 显示指定目录</span>
ls ./src

<span style="color:#75715e"># 显示目录列表详细信息和大小</span>
ls -lh

<span style="color:#75715e"># 列出所有文件包括隐藏文件</span>
ls -a

<span style="color:#75715e"># -F 可以显示类型，用以区分是文件还是目录</span>
ls -F <span style="color:#75715e"># 后缀为 ”/“ 代表是目录，”*“ 为可执行文件，没有则为文件</span>

<span style="color:#75715e"># 过滤文件列表, * 代表0个或多个字符， ? 代表一个字符</span>
ls javasc*

<span style="color:#75715e"># -i 查看inode编号, 每一个文件或目录都有一个唯一的编号，这个数字由内核分配给文件系统中的每一个对象</span>
ls -i
</code></pre></div><h2 id="pwd">pwd</h2>
<p>显示当前工作目录</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pwd
</code></pre></div><h2 id="wc">wc</h2>
<p>统计文件的行数、字数、字节数, 常见用于统计代码行数</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 统计字节数</span>
wc -c README.md

<span style="color:#75715e"># 统计行数</span>
wc -l README.md

<span style="color:#75715e"># 统计字数</span>
wc -w README.md

<span style="color:#75715e"># 统计字符数</span>
wc -m README.md
</code></pre></div><h2 id="find">find</h2>
<p>指定某个目录下查找文件</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 在当前目录递归搜索文件名为 README.md 文件</span>
find . -name README.md

<span style="color:#75715e"># 通过通配符进行查找, 必须用引号括着, 这里查找所有后缀为 .md 文件</span>
find . -name <span style="color:#e6db74">&#34;*.md&#34;</span>
find . -iname <span style="color:#e6db74">&#34;*.md&#34;</span>  <span style="color:#75715e"># 忽略文件大小写</span>

<span style="color:#75715e"># 排除文件，只要加 ! , 排除掉所有 .md 后缀的文件</span>
find . ! -name <span style="color:#e6db74">&#34;*.md&#34;</span>

<span style="color:#75715e"># 根据类型进行过滤搜索</span>
<span style="color:#75715e"># f 普通文件, l 符号连接</span>
<span style="color:#75715e"># d 目录, c 字符设备</span>
<span style="color:#75715e"># b 块设备, s 套接字, p Fifo</span>
find . -type f

<span style="color:#75715e"># 限定目录递归深度</span>
find . -maxdepth <span style="color:#ae81ff">3</span>  <span style="color:#75715e"># 最大为3个目录</span>
find . -mindepth <span style="color:#ae81ff">3</span>  <span style="color:#75715e"># 最小为3个目录</span>

<span style="color:#75715e"># 查找文件大小大于 25k 文件</span> 
find /root -size +25k

<span style="color:#75715e"># 查找10天前文件 -mtime 修改时间、 -ctime 创建时间、 -atime 访问时间</span>
find /root -mtime +10
</code></pre></div><h2 id="mkdir">mkdir</h2>
<p>创建目录</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 在当前目录下创建 temp 目录</span>
mkdir temp

<span style="color:#75715e"># 创建多层目录</span>
mkdir -p temp/temp2/temp3

<span style="color:#75715e"># 基于权限创建</span>
mkdir -m <span style="color:#ae81ff">777</span> temp
</code></pre></div><h2 id="mktemp">mktemp</h2>
<p>创建临时目录或文件，Linux使用 <code>/tmp</code> 目录来存放不需要永久保留的文件，大多数Linux发行版配置了系统在启动时自动删除 <code>/tmp</code> 目录的所有文件。</p>
<p>默认情况下， <code>mktemp</code> 会在本地目录中创建一个文件，只要指定一个文件名模板就行，模板可以包含任意文本文件名，在文件名末尾加上<strong>6</strong>个X就行了。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 创建本地临时文件, 会在当前目录下创建一个叫 log.XXXXXX, XXXXXX是一个随机字符码，保证文件名在目录中是唯一的。</span>
mktemp log.XXXXXX  <span style="color:#75715e"># log.J3awfb</span>

<span style="color:#75715e"># -t, 在 /tmp 目录创建临时文件, 返回绝对路径地址</span>
mktemp -t log.XXXXXX <span style="color:#75715e"># /tmp/log.G5g9dX</span>

<span style="color:#75715e"># -d 创建临时目录, 这样就能用该目录进行任何需要的操作了，比如创建其他的临时文件</span>
mktemp -d dir.XXXXXX
</code></pre></div><h2 id="chattr">chattr</h2>
<p>用于修改文件属性</p>
<p>参数:</p>
<ul>
<li>
<p>a：让文件或目录仅供附加用途</p>
</li>
<li>
<p>b：不更新文件或目录的最后存取时间</p>
</li>
<li>
<p>c：将文件或目录压缩后存放</p>
</li>
<li>
<p>d：将文件或目录排除在倾倒操作之外</p>
</li>
<li>
<p>i：不得任意更动文件或目录</p>
</li>
<li>
<p>s：保密性删除文件或目录</p>
</li>
<li>
<p>S：即时更新文件或目录</p>
</li>
<li>
<p>u：预防意外删除</p>
</li>
<li>
<p>-R：递归处理，将指令目录下的所有文件及子目录一并处理</p>
</li>
<li>
<p>-v&lt;版本编号&gt;：设置文件或目录版本</p>
</li>
<li>
<p>-V：显示指令执行过程</p>
</li>
<li>
<p>+&lt;属性&gt;：开启文件或目录的该项属性</p>
</li>
<li>
<p>-&lt;属性&gt;：关闭文件或目录的该项属性</p>
</li>
<li>
<p>=&lt;属性&gt;：指定文件或目录的该项属性</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 锁定该文件, 防止文件被修改或删除</span>
chattr +i README.md  <span style="color:#75715e"># chattr -i README.md  解锁</span>

<span style="color:#75715e"># 可以使用 lsattr 查看赋予的属性</span>
lsattr README.md
</code></pre></div><h2 id="more">more</h2>
<p>分页查看文件内容, 每次查看一屏, 每屏能显示多少内容取决于终端大小。</p>
<p>与 <code>cat</code> 命令不同，<code>cat</code> 只能一次显示全部内容，如果内容太多部分会被截取掉。</p>
<p>快捷键：</p>
<ul>
<li><code>空格</code>或<code>PageUp</code> - 查看下一屏内容</li>
<li><code>B</code>或<code>PageDown</code> - 查看上一屏内容</li>
<li><code>回车</code> - 查看下一行内容</li>
<li><code>Q</code> - 退出</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">more README.md

<span style="color:#75715e"># 从第10行开始显示</span>
more +10 README.md

<span style="color:#75715e"># 显示查看进度</span>
more -d README.md <span style="color:#75715e"># --More--(17%)[Press space to continue, &#39;q&#39; to quit.]</span>
</code></pre></div><h2 id="paste">paste</h2>
<p>合并N个文件的列，相当于追加文件内容。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 1.txt 和 2.txt 合并输出</span>
paste 1.txt 2.txt

<span style="color:#75715e"># 1.txt 2.txt 合并后保存为 3.txt</span>
paste 1.txt 2.txt &gt; 3.txt
</code></pre></div><h2 id="stat">stat</h2>
<p>用于显示文件或目录的状态信息</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">stat logs
<span style="color:#75715e"># File: ‘logs/’</span>
<span style="color:#75715e"># Size: 16384           Blocks: 32         IO Block: 4096   directory</span>
<span style="color:#75715e"># Device: fd01h/64769d    Inode: 669067      Links: 5</span>
<span style="color:#75715e"># Access: (0755/drwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)</span>
<span style="color:#75715e"># Access: 2020-07-07 17:24:23.941816812 +0800</span>
<span style="color:#75715e"># Modify: 2020-07-12 11:46:55.567707577 +0800</span>
<span style="color:#75715e"># Change: 2020-07-12 11:46:55.567707577 +0800</span>
<span style="color:#75715e"># Birth: -</span>
</code></pre></div><h2 id="grep">grep</h2>
<p>强大的文本搜索工具，被称为Linux命令三剑客。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 从 README.md 文件中搜索 linux 关键字</span>
grep <span style="color:#e6db74">&#34;linux&#34;</span> README.md
grep <span style="color:#e6db74">&#34;linux&#34;</span> README.md README2.md <span style="color:#75715e"># 多个文件搜索</span>

<span style="color:#75715e"># 输出时高亮显示</span>
grep <span style="color:#e6db74">&#34;linux&#34;</span> README.md --color

<span style="color:#75715e"># -o 只输出匹配部分</span>
grep -o <span style="color:#e6db74">&#34;linux&#34;</span> README.md --color

<span style="color:#75715e"># -n 输出到匹配的行数</span>
grep -n <span style="color:#e6db74">&#34;linux&#34;</span> README.md

<span style="color:#75715e"># -c 输出到匹配次数</span>
grep -c <span style="color:#e6db74">&#34;linux&#34;</span> README.md

<span style="color:#75715e"># -r 递归目录文件搜索</span>
grep -r <span style="color:#e6db74">&#34;linux&#34;</span> ./src

<span style="color:#75715e"># 使用 glob 风格表达式搜索</span>
egrep <span style="color:#e6db74">&#34;[0-9]&#34;</span> <span style="color:#75715e"># 等价于 grep -E &#34;[0-9]&#34; README.md</span>
</code></pre></div><h2 id="touch">touch</h2>
<p>创建一个空文件, 如果文件存在只会修改文件的创建时间</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">touch README.md
</code></pre></div><h2 id="cd">cd</h2>
<p>进入指定目录</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 进入当前 src 目录</span>
cd src

<span style="color:#75715e"># 回到上一次目录</span>
cd -

<span style="color:#75715e"># 返回上一级目录</span>
cd ..
cd ../../..   <span style="color:#75715e"># 返回多级</span>

<span style="color:#75715e"># 进入家目录</span>
cd ~
cd  <span style="color:#75715e"># 或者不带任何参数</span>

<span style="color:#75715e"># 将上一个命令的参数作为cd参数使用</span>
cd !$

<span style="color:#75715e"># 模糊匹配目录，有时目录名很长一个一个敲效率就很低</span>
<span style="color:#75715e"># * 代表0个或多个字符， ? 代表一个字符</span>
cd javasc*
</code></pre></div><h1 id="rm">rm</h1>
<p>删除指定目录或文件</p>
<p>注: 使用此命令需要非常小心, 一但删除无法恢复</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 删除当前 1.txt 文件</span>
rm 1.txt

<span style="color:#75715e"># -i 删除前询问是否真的要删除，因为一旦删除无法恢复</span>
rm -i README.md

<span style="color:#75715e"># 这条命令比较常用, 强制删除目录或文件</span>
<span style="color:#75715e"># -r 如果是目录递归删除, -f 强制删除 不发出任何警告</span>
rm -rf ./src
</code></pre></div><h2 id="rmdir">rmdir</h2>
<p>删除指定空目录</p>
<p>注：<code>rmdir</code> 实际上用得并不多，因为不是很灵活，基本上使用 <code>rm</code> 代替</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 删除当前 temp 空目录, 如果不是空目录会发出警告</span>
rmdir temp

<span style="color:#75715e"># -p 参数可以删除多层空目录, 发现temp3是空目录删除掉，然后接着往父级找如果还是空目录继续删除...</span>
rmdir -p temp1/temp2/temp3

<span style="color:#75715e"># -i 删除前询问确认删除</span>
rmdir -i temp
</code></pre></div><h2 id="cp">cp</h2>
<p>拷贝文件或目录</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 将当前 README.md 文件拷贝到上一层</span>
cp ./README.md ../README.md

<span style="color:#75715e"># -a 将原文件属性一同拷贝, 修改时间、创建时间等</span>
cp -a ./README.md ../README.md

<span style="color:#75715e"># -r 用于递归拷贝目录</span>
cp -r home ../home

<span style="color:#75715e"># -i 如果目标文件存在会询问用户是否需要覆盖</span>
cp -i README.md README.md
</code></pre></div><h2 id="cat">cat</h2>
<p>查看指定整个文件内容</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 查看 README.md 文件所有内容</span>
cat README.md
cat README.md README2.md  <span style="color:#75715e"># 或者一次性显示多个文件</span>

<span style="color:#75715e"># -n 每一行显示行号</span>
cat -n README.md

<span style="color:#75715e"># -b 只给有内容的行显示行号</span>
cat -b README.md
</code></pre></div><h2 id="mv">mv</h2>
<p><code>mv</code> 有2个用途：</p>
<ul>
<li>将文件或目录移动到另一个位置</li>
<li>将文件或目录重命名</li>
</ul>
<p>注：实际上 <code>mv</code> 是用来移动文件或目录，只不过有类似重命名的功能而已。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 将 README.md 重命名为 README-2.md, 如果 README-2.md 存在会直接覆盖。</span>
mv README.md README-2.md

<span style="color:#75715e"># 将 README.md 移动到上一层目录</span>
mv README.md ../README.md

<span style="color:#75715e"># -i 交互式操作，如果目标文件存在则进行询问是否覆盖</span>
mv -i README.md ../README.md
</code></pre></div><h2 id="locate">locate</h2>
<p>搜索文件，与 <code>find</code> 命令很像，但更快，因为是从数据库里查找, 通常每天会进行数据更新。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 搜索 README.md 相关文件</span>
locate README.md

<span style="color:#75715e"># 忽略大小写</span>
locate -i README.md
</code></pre></div><h2 id="open">open</h2>
<p><code>open</code> 命令可在 <code>linux</code> / <code>mac</code> 具有可视化界面下进行文本编辑、打开应用程序等功能。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 在mac下用Finder打开当前目录</span>
open .

<span style="color:#75715e"># 用默认应用程序打开文件</span>
open README.md

<span style="color:#75715e"># 用默认编辑器打开文件</span>
open -e README.md

<span style="color:#75715e"># 如果是一个URL用默认浏览器打开页面</span>
open https://github.com/xjh22222228/linux-manual.git

<span style="color:#75715e"># 指定某个应用程序打开某个文件, 如果不指定文件默认直接打开程序</span>
open -a /Applications/Google<span style="color:#ae81ff">\ </span>Chrome.app README.md
</code></pre></div><h2 id="source">source</h2>
<p>在当前Shell环境中从指定文件读取和执行命令， 通常用于重新执行环境。</p>
<p>它有个别名 <code>.</code> 点操作符号。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 等价 . ~/.bash_profile</span>
source ~/.bash_profile
</code></pre></div><p>实际上大部分开发者都没搞懂 <code>source</code> 命令。 可以把它理解为编程语言中的 <code>import</code>, <code>java/python/js</code> 都有这个，就是用来导入文件。</p>
<p>下面演示 source 用于 shell 脚本中</p>
<p>util.sh</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>getName<span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  echo <span style="color:#e6db74">&#34;Linux&#34;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>main.sh</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span><span style="color:#75715e"># 加载文件</span>
source ./util.sh

<span style="color:#75715e"># 这样就可以调用 util 文件中的函数了</span>
echo <span style="color:#66d9ef">$(</span>getName<span style="color:#66d9ef">)</span>
</code></pre></div><h2 id="tree">tree</h2>
<p>生成目录树结构, 通常用于描述项目结构。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 递归当前目录下所有文件并生成目录树</span>
tree
<span style="color:#75715e"># .</span>
<span style="color:#75715e"># ├── LICENSE</span>
<span style="color:#75715e"># ├── README.md</span>
<span style="color:#75715e"># └── media</span>
<span style="color:#75715e">#     └── poster.jpg</span>


<span style="color:#75715e"># -I 忽略某些目录</span>
tree -I <span style="color:#e6db74">&#34;node_modules|.git|.svn&#34;</span>

<span style="color:#75715e"># 只显示目录</span>
tree -d

<span style="color:#75715e"># 指定要递归的目录层级</span>
tree -L <span style="color:#ae81ff">3</span>
</code></pre></div><h2 id="ln">ln</h2>
<p>将某一个文件在另外一个位置建立并产生同步的链接。 当不同的2个目录需要同时引用某一个文件时此命令就派上用场了。</p>
<p>软链接也可以叫符号链接：</p>
<ul>
<li>软链接，以路径的形式存在。类似于Windows操作系统中的快捷方式</li>
<li>软链接可以 跨文件系统 ，硬链接不可以</li>
<li>软链接可以对一个不存在的文件名进行链接</li>
<li>软链接可以对目录进行链接</li>
</ul>
<p>硬链接：</p>
<ul>
<li>硬链接，以文件副本的形式存在。但不占用实际空间, 从根本上而言就是同一个文件。</li>
<li>不允许给目录创建硬链接</li>
<li>硬链接只有在同一个文件系统中才能创建</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 默认创建硬链接，修改 README.md 内容， a.md 也会同步修改, 修改a.md  README.md 也会同步修改</span>
ln README.md a.md

<span style="color:#75715e"># -s 创建软链接</span>
ln -s README.md a.md <span style="color:#75715e"># 如果删除了 README.md  a.md 将失效</span>

<span style="color:#75715e"># -f 强制执行</span>
ln -f README.md ./src/a.md
</code></pre></div><h2 id="file">file</h2>
<p>查看文件类型, 比如文件、目录、二进制、符号链接等</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 输出 README.md: ASCII text</span>
file README.md

<span style="color:#75715e"># index.html: HTML document, UTF-8 Unicode text, with very long lines, with no line terminators</span>
file index.html
</code></pre></div><hr>
<h1 id="系统管理">系统管理</h1>
<h2 id="nohup">nohup</h2>
<p>程序以挂起方式运行。</p>
<p><code>nohup</code> 命令会自动将 STDOUT(标准输出)和STDERR(标准错误)的消息重定向到一个名为 <code>nohup.out</code> 文件。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 例如运行一个 node.js 程序</span>
nohup node main.js

<span style="color:#75715e"># 在当前目录会出现 nohup.out 文件，里面包含了 Hello World</span>
nohuo echo <span style="color:#e6db74">&#34;Hello World&#34;</span>
</code></pre></div><h2 id="watch">watch</h2>
<p>通常用于监听1个命令的运行结果、定时执行命令</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 每5秒执行一次 tail 命令, 如果不指定-n 默认为2秒</span>
watch -n <span style="color:#ae81ff">5</span> <span style="color:#e6db74">&#34;tail README.md&#34;</span>

<span style="color:#75715e"># -d 高亮显示变化内容</span>
watch -n <span style="color:#ae81ff">5</span> -d <span style="color:#e6db74">&#34;tail README.md&#34;</span>
</code></pre></div><h2 id="ping">ping</h2>
<p>测试目标地址是否可连接、延迟度</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 测试 github.com 连通性, 按 ctrl + C 停止</span> 
ping github.com

<span style="color:#75715e"># ping 5次后断开</span>
ping -c <span style="color:#ae81ff">5</span> xiejiahe.com

<span style="color:#75715e"># 每5秒ping 一次</span>
ping -i <span style="color:#ae81ff">5</span> xiejiahe.com
</code></pre></div><h2 id="which">which</h2>
<p>查找某个命令存储在哪个位置, 输出绝对路径, <code>which</code> 会在环境变量 <code>$PATH</code> 设置的目录里去查找。</p>
<p>注: 可以通过 <code>echo $PATH</code> 查看设置的目录.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">which top  <span style="color:#75715e"># /usr/bin/top</span>

<span style="color:#75715e"># 查找pwd发现会找不到，因为 pwd 是bash的内置命令</span>
which pwd

<span style="color:#75715e"># 打印多个命令</span>
which ls vi
</code></pre></div><h2 id="shutdown">shutdown</h2>
<p>将系统关机或重启操作。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 立即重启系统</span>
shutdown -r now

<span style="color:#75715e"># 关闭系统并切断电源</span>
shutdown -h now <span style="color:#75715e"># 立即关机, 实际上调用 init 0</span>

<span style="color:#75715e"># 把前一个关机或重启取消掉</span>
shutdown -c

<span style="color:#75715e"># 设定一个时间关机,  &#34;&amp;&#34; 符号表示后台模式，让出CLI</span>
shutdown -h 05:33 &amp;
shutdown +5 <span style="color:#e6db74">&#34;5分钟后关机&#34;</span> <span style="color:#75715e"># 5分钟后关机，同时送出警告信息给登入用户：</span>
</code></pre></div><h2 id="reboot">reboot</h2>
<p>有点类似 <code>shutdown</code> 命令， 用于重新启动系统。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 重启系统</span>
reboot

<span style="color:#75715e"># -f 强制重启</span>
reboot -f

<span style="color:#75715e"># 用于模拟重新启动系统，不会真实重启，数据会写入 /var/log/wtmp</span> 
reboot -w

<span style="color:#75715e"># 在重新启动之前关闭所有网络界面</span>
reboot -i
</code></pre></div><h2 id="uptime">uptime</h2>
<p>查看系统负载信息， 此命令非常简单，没有太多的参数。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 21:51:53 当前时间</span>
<span style="color:#75715e"># up 750 days, 13:24  当前系统运行的天数，小时，分钟 （从上次开机起计算）</span>
<span style="color:#75715e"># 1 user 当前系统登录用户数</span>
<span style="color:#75715e"># load average: 0.08, 0.07, 0.06    一分钟、5分钟、15分钟平均负载, 这3个值不能大于CPU个数，如果大于了说明系统负载高，性能低。</span>
uptime <span style="color:#75715e"># 21:51:53 up 750 days, 13:24,  1 user,  load average: 0.08, 0.07, 0.06</span>
</code></pre></div><h2 id="crontab">crontab</h2>
<p>周期性执行任务, 通常用于定时执行作业。</p>
<p><code>* * * * *</code> 分别含义：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">*    *    *    *    *
┬    ┬    ┬    ┬    ┬
│    │    │    │    │
│    │    │    │    │
│    │    │    │    └───── 一周中的某一天 <span style="color:#f92672">(</span><span style="color:#ae81ff">0</span> - 7<span style="color:#f92672">)</span>  0或7代表是星期日
│    │    │    └────────── 月份 <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> - 12<span style="color:#f92672">)</span>
│    │    └─────────────── 一个月的某一天 <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> - 31<span style="color:#f92672">)</span>
│    └──────────────────── 小时 <span style="color:#f92672">(</span><span style="color:#ae81ff">0</span> - 23<span style="color:#f92672">)</span>
└───────────────────────── 分钟 <span style="color:#f92672">(</span><span style="color:#ae81ff">0</span> - 59<span style="color:#f92672">)</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 列出该用户设置</span>
crontab -l

<span style="color:#75715e"># 编辑该用户设置</span>
crontab -e

<span style="color:#75715e"># 删除该用户设置</span>
crontab -r
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 每天18点18分执行 echo `date` &gt; README.md</span>
<span style="color:#ae81ff">18</span> <span style="color:#ae81ff">18</span> * * * echo <span style="color:#e6db74">`</span>date<span style="color:#e6db74">`</span> &gt; README.md

<span style="color:#75715e"># 每一分钟执行</span>
* * * * */1 echo <span style="color:#e6db74">`</span>date<span style="color:#e6db74">`</span> &gt; README.md

<span style="color:#75715e"># 每个月的第一天中午12点</span>
<span style="color:#ae81ff">00</span> <span style="color:#ae81ff">12</span> <span style="color:#ae81ff">1</span> * * 命令

<span style="color:#75715e"># 每个月的最后一天就比较麻烦了, 需要配合 date 命令和 if 流程语句来实现</span>
<span style="color:#75715e"># 这里 if 语句检查明天的日期是不是01，如果是今天就是最后一天</span>
<span style="color:#75715e"># 每天中午12点检查今天是不是最后一天</span>
<span style="color:#ae81ff">00</span> <span style="color:#ae81ff">12</span> * * * <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">`</span>date +%d -d tomorrow<span style="color:#e6db74">`</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">01</span> <span style="color:#f92672">]</span> ; <span style="color:#66d9ef">then</span> ; 要执行的命令
</code></pre></div><h2 id="uname">uname</h2>
<p>打印系统信息</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 不带任何参数打印当前操作系统内核名称</span>
uname <span style="color:#75715e"># Linux , 等价于 uname -s</span>

<span style="color:#75715e"># 打印系统所有信息</span>
uname -a

<span style="color:#75715e"># -r 打印系统版本 , 如果次版本号都是偶数，说明是一个稳定版</span>
uname -r <span style="color:#75715e"># 3.10.0-514.26.2.el7.x86_64</span>

<span style="color:#75715e"># 打印网络节点主机名称</span>
uname -n <span style="color:#75715e"># Yin.local</span>

<span style="color:#75715e"># 打印处理器名称</span>
uname -p <span style="color:#75715e"># i386</span>

<span style="color:#75715e"># 打印主机的硬件架构名称</span>
uname -m <span style="color:#75715e"># x86_64</span>
</code></pre></div><h2 id="ifconfig">ifconfig</h2>
<p>配置或显示系统网卡的网络参数</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 显示所有网络参数信息</span>
ifconfig

<span style="color:#75715e"># 配置网卡IP地址</span>
ifconfig eth0 192.168.1.111
</code></pre></div><h2 id="whereis">whereis</h2>
<p>用来定位指令的二进制程序、源代码文件和man手册页等相关文件的路径。</p>
<p>注意：<code>whereis</code> 是从数据库里查找的，因此特别快，默认情况下一星期更新一次数据，所以有时会查找删除的数据或者刚建立的数据无法找到问题。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 查找 nginx</span>
whereis nginx <span style="color:#75715e"># nginx: /usr/sbin/nginx /usr/lib64/nginx /etc/nginx /usr/share/nginx /usr/share/man/man8/nginx.8.gz /usr/share/man/man3/nginx.3pm.gz</span>

<span style="color:#75715e"># -b 指定只查找二进制</span>
where -b nginx <span style="color:#75715e"># nginx: /usr/sbin/nginx /usr/lib64/nginx /etc/nginx /usr/share/nginx</span>

<span style="color:#75715e"># -m 指定查找说明文件 man</span>
whereis -m nginx <span style="color:#75715e"># nginx: /usr/share/man/man8/nginx.8.gz /usr/share/man/man3/nginx.3pm.gz</span>
</code></pre></div><h2 id="chmod">chmod</h2>
<p>修改文件或目录权限</p>
<p>chmod [参数选项] [mode, 八进制或符号表示] files&hellip;</p>
<ul>
<li><code>u</code> 符号代表当前用户。</li>
<li><code>g</code> 符号代表和当前用户在同一个组的用户，以下简称组用户。</li>
<li><code>o</code> 符号代表其他用户。</li>
<li><code>a</code> 符号代表所有用户。</li>
<li><code>r</code> 符号代表读权限以及八进制数4。</li>
<li><code>w</code> 符号代表写权限以及八进制数2。</li>
<li><code>x</code> 符号代表执行权限以及八进制数1。</li>
<li><code>X</code> 符号代表如果目标文件是可执行文件或目录，可给其设置可执行权限。</li>
<li><code>s</code> 符号代表设置权限suid和sgid，使用权限组合u+s设定文件的用户的ID位，g+s设置组用户ID位。</li>
<li><code>t</code> 符号代表只有目录或文件的所有者才可以删除目录下的文件。</li>
<li><code>+</code> 符号代表添加目标用户相应的权限。</li>
<li><code>-</code> 符号代表删除目标用户相应的权限。</li>
<li><code>=</code> 符号代表添加目标用户相应的权限，删除未提到的权限。</li>
</ul>
<h4 id="文件权限码">文件权限码</h4>
<table>
<thead>
<tr>
<th>权限</th>
<th>二进制值</th>
<th>八进制值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>&mdash;</td>
<td>000</td>
<td>0</td>
<td>没有任何权限</td>
</tr>
<tr>
<td>&ndash;x</td>
<td>001</td>
<td>1</td>
<td>只有执行权限</td>
</tr>
<tr>
<td>-w-</td>
<td>010</td>
<td>2</td>
<td>只有写入权限</td>
</tr>
<tr>
<td>-wx</td>
<td>011</td>
<td>3</td>
<td>有写入和执行权限</td>
</tr>
<tr>
<td>r&ndash;</td>
<td>100</td>
<td>4</td>
<td>只有读取权限</td>
</tr>
<tr>
<td>r-x</td>
<td>101</td>
<td>5</td>
<td>有读取和执行权限</td>
</tr>
<tr>
<td>rw-</td>
<td>110</td>
<td>6</td>
<td>有读取和写入权限</td>
</tr>
<tr>
<td>rwx</td>
<td>111</td>
<td>7</td>
<td>有全部权限</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># README.md 文件设为所有用户可读取</span>
chmod a+r README.md

<span style="color:#75715e"># -R 递归目录下所有文件</span>
chmod a+r src/

<span style="color:#75715e"># 也可以用八进制符号表示</span>
<span style="color:#75715e"># 3个数字分别为 x,y,z 表示User、Group、及Other的权限。</span>
<span style="color:#75715e"># r=4, w=2, x=1</span>
chmod <span style="color:#ae81ff">777</span> README.md <span style="color:#75715e"># 等价于 chmod a=rwx README.md</span>
</code></pre></div><h2 id="lsof">lsof</h2>
<p>列出当前系统打开文件的工具</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## 打印所有打开文件的的列表</span>
lsof

<span style="color:#75715e"># 查看指定端口被占用情况</span>
lsof -i:8080

<span style="color:#75715e"># -p 列出指定进程号所打开的文件</span>
lsof -p <span style="color:#ae81ff">6112</span>
</code></pre></div><h2 id="chown">chown</h2>
<p>用来变更文件或目录的拥有者或所属群组</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 将 README.md 文件拥有者设为 byroot</span>
chown byroot README.md

<span style="color:#75715e"># 使用-R递归处理文件</span>
chown -R byroot src/

<span style="color:#75715e"># 改变所属群组, 拥有者设为 byroot 群组设为 byrootgroup</span>
chown byroot:byrootgroup README.md
</code></pre></div><h2 id="systemctl">systemctl</h2>
<p>系统服务管理器指令, 通常用来设置某个服务器默认开机启动或关闭。</p>
<p>命令：<code>systemctl [command] [unit]</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 立即启动服务</span>
systemctl start nginx.service

<span style="color:#75715e"># 立即停止服务</span>
systemctl stop nginx.service

<span style="color:#75715e"># 重启服务，stop 后 start</span>
systemctl restart nginx.service

<span style="color:#75715e"># 重新载入服务, 一般情况下重新载入新的配置</span>
systemctl reload nginx.service

<span style="color:#75715e"># 下次开机时默认启动服务</span>
systemctl enable nginx.service

<span style="color:#75715e"># 下次开机时不会启动服务</span>
systemctl disable nginx.service

<span style="color:#75715e"># 查看某个服务状态信息</span>
systemctl status nginx.service

<span style="color:#75715e"># 当前服务是否正在运行中</span>
systemctl is-active nginx.service

<span style="color:#75715e"># 查看服务开机有没有默认启动</span>
systemctl is-enable nginx.service
</code></pre></div><h2 id="service">service</h2>
<p>管理操作系统服务的命令, 是Redhat Linux兼容的发行版中用来控制系统服务的实用工具，它以启动、停止、重新启动和关闭系统服务，还可以显示所有系统服务的当前状态。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 启动 docker 服务</span>
service docker start

<span style="color:#75715e"># 查看 docker 状态</span>
service docker status

<span style="color:#75715e"># 停止 docker 服务</span>
service docker stop

<span style="color:#75715e"># 重新启动 docker 服务</span>
service docker restart

<span style="color:#75715e"># 查看所有服务状态</span>
service --status-all
</code></pre></div><h2 id="free">free</h2>
<p>显示内存使用情况</p>
<p>选项</p>
<ul>
<li>b 字节单位显示</li>
<li>k KB单位显示</li>
<li>m MB单位显示</li>
<li>g GB单位显示</li>
<li>s&lt;秒&gt; 每S秒监控内存使用情况</li>
</ul>
<p>解释：</p>
<ul>
<li>total 内存总数</li>
<li>used 已使用内存</li>
<li>free 空闲内存</li>
<li>shared 当前已废弃内存</li>
<li>buff/cache 缓存内存数</li>
<li>1204660 可用内存数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">free
<span style="color:#75715e"># 输出以下, 默认以字节为单位</span>
              total        used        free      shared  buff/cache   available
Mem:        <span style="color:#ae81ff">1882192</span>      <span style="color:#ae81ff">485312</span>      <span style="color:#ae81ff">448424</span>         <span style="color:#ae81ff">704</span>      <span style="color:#ae81ff">948456</span>     <span style="color:#ae81ff">1204660</span>
Swap:             <span style="color:#ae81ff">0</span>           <span style="color:#ae81ff">0</span>           <span style="color:#ae81ff">0</span>

<span style="color:#75715e"># MB单位显示</span>
free - m

<span style="color:#75715e"># 10秒执行一次查询</span>
free -s <span style="color:#ae81ff">10</span>
</code></pre></div><h2 id="type">type</h2>
<p><code>type</code> 命令有2个作用：</p>
<ul>
<li>用来查找命令的位置，类似 which 命令</li>
<li>检测某个命令是内建命令还是外部命令</li>
</ul>
<p>普及：内建命令和外部命令的区别：内建命令不会衍生出子进程，而外部命令会衍生出一个子进程然后执行命令, 所以内建命令执行效率要高。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># cd is a shell builtin  表示这是shell内建命令</span>
type cd

<span style="color:#75715e"># ps is hashed (/usr/bin/ps)  表示这是一个外部命令</span>
type ps
</code></pre></div><h2 id="alias">alias</h2>
<p>设置命令别名，用于简化较长的命令。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 列出所有已设置的别名</span>
alias

<span style="color:#75715e"># 删除所有别名</span>
unalias -a

<span style="color:#75715e"># 设置别名</span>
alias ll<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -l&#39;</span>
</code></pre></div><h2 id="time">time</h2>
<p>测试某条命令执行所需花费时间</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># time 后面跟着要测试的命令</span>
<span style="color:#75715e"># 输出:  0.02s user 0.01s system 0% cpu 6.233 total</span>
time curl https://github.com/xjh22222228/linux-manual
</code></pre></div><h2 id="jobs">jobs</h2>
<p>显示当前运行在后台模式中的所有用户的进程（作业）</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-l</td>
<td>打印进程的PID和作业号以及作业命令</td>
</tr>
<tr>
<td>-n</td>
<td>只列出上次shell发出的通知后改变了状态的作业</td>
</tr>
<tr>
<td>-p</td>
<td>只列出作业的PID（进程ID）</td>
</tr>
<tr>
<td>-r</td>
<td>只列出运行中的作业</td>
</tr>
<tr>
<td>-s</td>
<td>只列出已停止的作业</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 先来启一个后台作业进程, &amp; 符号表示后台运行</span>
sleep <span style="color:#ae81ff">100</span> &amp;
<span style="color:#75715e"># 查看后台作业</span>
jobs <span style="color:#75715e"># 输出：[1]+  Running       sleep 3 &amp;</span>
</code></pre></div><p>相关命令 <a href="#&amp;">&amp;</a></p>
<h2 id="heading">&amp;</h2>
<p><code>&amp;</code> 符号表示后台运行, 只要在命令后面加上 <code>&amp;</code> 符号即可。</p>
<p>如果一个命令运行的时间非常长，比如处理文件、HTTP请求时就可以在后台运行，这样就可以让出shell继续执行其他命令。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 模拟了休眠100秒并在后台运行</span>
sleep <span style="color:#ae81ff">100</span> &amp;
</code></pre></div><p>你可以通过 <a href="#jobs">jobs</a> 命令来查看后台作业。</p>
<hr>
<h1 id="系统进程">系统进程</h1>
<h2 id="ps">ps</h2>
<p>查看当前系统进程状态。</p>
<p><code>ps</code> 命令非常复杂，且参数极多，由于 <code>ps</code> 历史问题，参数风格支持了三种 <code>UNIX</code>/<code>BSD</code>/``GNU` 这里不详细的介绍，感兴趣可以自行了解。</p>
<ul>
<li>Unix 风格参数 - 前面加单破折线</li>
<li>BSD 风格的参数 - 前面不加破折线</li>
<li>GNU 风格长参数 - 前面加双破折线</li>
</ul>
<h4 id="unix-风格参数">Unix 风格参数</h4>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-A</td>
<td>显示所有进程</td>
</tr>
<tr>
<td>-N</td>
<td>显示与指定参数不符的所有进程</td>
</tr>
<tr>
<td>-a</td>
<td>显示除控制进程和无终端进程外的所有进程</td>
</tr>
<tr>
<td>-d</td>
<td>显示除控制进程外的所有进程</td>
</tr>
<tr>
<td>-e</td>
<td>显示所有进程</td>
</tr>
<tr>
<td>-C cmdlist</td>
<td>显示包含在cmdlist列表中的进程</td>
</tr>
<tr>
<td>-G grplist</td>
<td>显示组ID在grplist列表中的进程</td>
</tr>
<tr>
<td>-U userlist</td>
<td>显示属主的用户ID在userlist列表中的进程</td>
</tr>
<tr>
<td>-g grplist</td>
<td>显示会话或组ID在grplist列表中的进程</td>
</tr>
<tr>
<td>-p pidlist</td>
<td>显示PID在pidlist列表中的进程</td>
</tr>
<tr>
<td>-s sesslist</td>
<td>显示会话ID在sesslist列表中的进程</td>
</tr>
<tr>
<td>-t ttylist</td>
<td>显示终端ID在ttylist列表中的进程</td>
</tr>
<tr>
<td>-u userlist</td>
<td>显示有效用户ID在userlist列表中的进程</td>
</tr>
<tr>
<td>-F</td>
<td>显示更多额外输出（相对-f参数而言）</td>
</tr>
<tr>
<td>-O format</td>
<td>显示默认的输出列以及format列表指定的特定列</td>
</tr>
<tr>
<td>-M</td>
<td>显示进程的安全信息</td>
</tr>
<tr>
<td>-c</td>
<td>显示进程的额外条调度器信息</td>
</tr>
<tr>
<td>-l</td>
<td>显示长列表</td>
</tr>
<tr>
<td>-o format</td>
<td>仅显示由format指定的列表</td>
</tr>
<tr>
<td>-y</td>
<td>不要显示进程标记（process tag, 表明进程状态的标记）</td>
</tr>
<tr>
<td>-Z</td>
<td>显示安全标签（security context）信息</td>
</tr>
<tr>
<td>-H</td>
<td>用层级格式来显示进程（树状，用来显示父进程）</td>
</tr>
<tr>
<td>-n namelist</td>
<td>定义了WCHAN列显示的值</td>
</tr>
<tr>
<td>-w</td>
<td>采用宽输出模式，不限宽显示</td>
</tr>
<tr>
<td>-L</td>
<td>显示进程中的线程</td>
</tr>
<tr>
<td>-V</td>
<td>显示PS命令的版本号</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 显示所有进程信息</span>
ps -A

<span style="color:#75715e"># 显示指定用户进程信息</span>
ps -u root

<span style="color:#75715e"># 显示所有进程信息包括命令行</span>
ps -ef  <span style="color:#75715e"># -e 等价于 -A  , 即等价于 ps -Af</span>

<span style="color:#75715e"># 这是 BSD 风格参数，列出所有正在内存中的进程</span>
ps aux

<span style="color:#75715e"># 配合 grep 查询指定进程</span>
ps -ef | grep nginx
</code></pre></div><h2 id="pstree">pstree</h2>
<p>pstree命令以树状图的方式展现进程之间的派生关系。</p>
<h4 id="显示所有进程的所有详细信息">显示所有进程的所有详细信息</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pstree -a
<span style="color:#75715e"># 输出信息：</span>
├─AliSecGuard
  ├─assist_daemon
  │   └─7*<span style="color:#f92672">[</span><span style="color:#f92672">{</span>assist_daemon<span style="color:#f92672">}</span><span style="color:#f92672">]</span>
  ├─atd -f
  ├─auditd -n
  │   └─<span style="color:#f92672">{</span>auditd<span style="color:#f92672">}</span>
  ├─crond -n
  ├─dbus-daemon --system --address<span style="color:#f92672">=</span>systemd: --nofork --nopidfile --systemd-activation
  ├─dhclient -H debug010000002015 -1 -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf /var/run/dhclient-eth0.pid eth0
  ├─frps -c ./frps.ini
  │   └─2*<span style="color:#f92672">[</span><span style="color:#f92672">{</span>frps<span style="color:#f92672">}</span><span style="color:#f92672">]</span>
  ├─nginx
  │   └─nginx                   
  ├─ntpd -u ntp:ntp -g
  ├─polkitd --no-debug
  │   └─5*<span style="color:#f92672">[</span><span style="color:#f92672">{</span>polkitd<span style="color:#f92672">}</span><span style="color:#f92672">]</span>
  ├─rsyslogd -n
  │   └─2*<span style="color:#f92672">[</span><span style="color:#f92672">{</span>rsyslogd<span style="color:#f92672">}</span><span style="color:#f92672">]</span>
  ├─sshd -D
  │   └─sshd    
  │       └─bash
  │           └─pstree -a
  ├─systemd-journal
  ├─systemd-logind
  ├─systemd-udevd
  └─tuned -Es /usr/sbin/tuned -l -P
      └─4*<span style="color:#f92672">[</span><span style="color:#f92672">{</span>tuned<span style="color:#f92672">}</span><span style="color:#f92672">]</span>
</code></pre></div><h4 id="显示当前所有进程的进程号和进程id">显示当前所有进程的进程号和进程id</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pstree -p
<span style="color:#75715e"># 输出信息：</span>
systemd<span style="color:#f92672">(</span>1<span style="color:#f92672">)</span>─┬─AliSecGuard<span style="color:#f92672">(</span>9347<span style="color:#f92672">)</span>─┬─<span style="color:#f92672">{</span>AliSecGuard<span style="color:#f92672">}</span><span style="color:#f92672">(</span>9348<span style="color:#f92672">)</span>
           ├─agetty<span style="color:#f92672">(</span>474<span style="color:#f92672">)</span>
           ├─agetty<span style="color:#f92672">(</span>475<span style="color:#f92672">)</span>
           ├─assist_daemon<span style="color:#f92672">(</span>1356<span style="color:#f92672">)</span>─┬─<span style="color:#f92672">{</span>assist_daemon<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1370<span style="color:#f92672">)</span>
           │                     ├─<span style="color:#f92672">{</span>assist_daemon<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1371<span style="color:#f92672">)</span>
           │                     ├─<span style="color:#f92672">{</span>assist_daemon<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1372<span style="color:#f92672">)</span>
           │                     ├─<span style="color:#f92672">{</span>assist_daemon<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1870<span style="color:#f92672">)</span>
           │                     ├─<span style="color:#f92672">{</span>assist_daemon<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1871<span style="color:#f92672">)</span>
           │                     ├─<span style="color:#f92672">{</span>assist_daemon<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1872<span style="color:#f92672">)</span>
           │                     └─<span style="color:#f92672">{</span>assist_daemon<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1873<span style="color:#f92672">)</span>
           ├─atd<span style="color:#f92672">(</span>459<span style="color:#f92672">)</span>
           ├─auditd<span style="color:#f92672">(</span>368<span style="color:#f92672">)</span>───<span style="color:#f92672">{</span>auditd<span style="color:#f92672">}</span><span style="color:#f92672">(</span>375<span style="color:#f92672">)</span>
           ├─crond<span style="color:#f92672">(</span>455<span style="color:#f92672">)</span>
           ├─dbus-daemon<span style="color:#f92672">(</span>440<span style="color:#f92672">)</span>
           ├─dhclient<span style="color:#f92672">(</span>680<span style="color:#f92672">)</span>
           ├─nginx<span style="color:#f92672">(</span>9605<span style="color:#f92672">)</span>───nginx<span style="color:#f92672">(</span>9608<span style="color:#f92672">)</span>
           ├─ntpd<span style="color:#f92672">(</span>766<span style="color:#f92672">)</span>
           ├─polkitd<span style="color:#f92672">(</span>448<span style="color:#f92672">)</span>─┬─<span style="color:#f92672">{</span>polkitd<span style="color:#f92672">}</span><span style="color:#f92672">(</span>489<span style="color:#f92672">)</span>
           │              ├─<span style="color:#f92672">{</span>polkitd<span style="color:#f92672">}</span><span style="color:#f92672">(</span>490<span style="color:#f92672">)</span>
           │              ├─<span style="color:#f92672">{</span>polkitd<span style="color:#f92672">}</span><span style="color:#f92672">(</span>491<span style="color:#f92672">)</span>
           │              ├─<span style="color:#f92672">{</span>polkitd<span style="color:#f92672">}</span><span style="color:#f92672">(</span>492<span style="color:#f92672">)</span>
           │              └─<span style="color:#f92672">{</span>polkitd<span style="color:#f92672">}</span><span style="color:#f92672">(</span>493<span style="color:#f92672">)</span>
           ├─rsyslogd<span style="color:#f92672">(</span>740<span style="color:#f92672">)</span>─┬─<span style="color:#f92672">{</span>rsyslogd<span style="color:#f92672">}</span><span style="color:#f92672">(</span>769<span style="color:#f92672">)</span>
           │               └─<span style="color:#f92672">{</span>rsyslogd<span style="color:#f92672">}</span><span style="color:#f92672">(</span>770<span style="color:#f92672">)</span>
           ├─sshd<span style="color:#f92672">(</span>4007<span style="color:#f92672">)</span>───sshd<span style="color:#f92672">(</span>21896<span style="color:#f92672">)</span>───bash<span style="color:#f92672">(</span>21898<span style="color:#f92672">)</span>───pstree<span style="color:#f92672">(</span>21921<span style="color:#f92672">)</span>
           ├─systemd-journal<span style="color:#f92672">(</span>326<span style="color:#f92672">)</span>
           ├─systemd-logind<span style="color:#f92672">(</span>445<span style="color:#f92672">)</span>
           ├─systemd-udevd<span style="color:#f92672">(</span>350<span style="color:#f92672">)</span>
           └─tuned<span style="color:#f92672">(</span>743<span style="color:#f92672">)</span>─┬─<span style="color:#f92672">{</span>tuned<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1004<span style="color:#f92672">)</span>
                        ├─<span style="color:#f92672">{</span>tuned<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1006<span style="color:#f92672">)</span>
                        ├─<span style="color:#f92672">{</span>tuned<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1009<span style="color:#f92672">)</span>
                        └─<span style="color:#f92672">{</span>tuned<span style="color:#f92672">}</span><span style="color:#f92672">(</span>1011<span style="color:#f92672">)</span>
</code></pre></div><h2 id="top">top</h2>
<p>实时查看系统执行中的程序, top 命令跟 <code>ps</code> 命令相似，但它是实时的。</p>
<p>默认情况下 <code>top</code> 命令启动时会按照 <code>%CPU</code> 值对进程排序。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>PID</td>
<td>进程的ID</td>
</tr>
<tr>
<td>USER</td>
<td>进程的优先级</td>
</tr>
<tr>
<td>PR</td>
<td>进程的优先级</td>
</tr>
<tr>
<td>NI</td>
<td>进程的谦让度值</td>
</tr>
<tr>
<td>VIRT</td>
<td>进程占用的虚拟内存总量</td>
</tr>
<tr>
<td>RES</td>
<td>进程占用的物理内存总量</td>
</tr>
<tr>
<td>SHR</td>
<td>进程和其他进程共享的内存总量</td>
</tr>
<tr>
<td>S</td>
<td>进程的状态（D=可中断的休眠状态，R在运行状态，S休眠状态，T跟踪状态或停止状态，Z=僵化状态）</td>
</tr>
<tr>
<td>%CPU</td>
<td>进程使用的CPU时间比例</td>
</tr>
<tr>
<td>%MEM</td>
<td>进程使用的内存占可用内存的比例</td>
</tr>
<tr>
<td>TIME+</td>
<td>自进程启动到目前为止的CPU时间总量</td>
</tr>
<tr>
<td>COMMAND</td>
<td>进程所对应的命令行名称，也就是启动的程序名</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 实时监听进程变化</span>
<span style="color:#75715e">#  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND</span>                               
<span style="color:#75715e">#    1 root      20   0  125124   3612   2428 S  0.0  0.2   0:04.88 systemd</span>
top

<span style="color:#75715e"># 显示2条</span>
top -n <span style="color:#ae81ff">2</span>

<span style="color:#75715e"># 显示指定的进程信息</span>
top -pid &lt;pid&gt;

<span style="color:#75715e"># 查看进程所有的线程</span>
top -H -p &lt;pid&gt;
</code></pre></div><h2 id="netstat">netstat</h2>
<p>查看网络系统状态信息</p>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>a或&ndash;all</td>
<td>显示所有连线中的Socket</td>
</tr>
<tr>
<td>A&lt;网络类型&gt;或&ndash;&lt;网络类型&gt;</td>
<td>列出该网络类型连线中的相关地址</td>
</tr>
<tr>
<td>c或&ndash;continuous</td>
<td>持续列出网络状态</td>
</tr>
<tr>
<td>C或&ndash;cache</td>
<td>显示路由器配置的快取信息</td>
</tr>
<tr>
<td>e或&ndash;extend</td>
<td>显示网络其他相关信息</td>
</tr>
<tr>
<td>F或&ndash;fib</td>
<td>显示FIB</td>
</tr>
<tr>
<td>g或&ndash;groups</td>
<td>显示多重广播功能群组组员名单</td>
</tr>
<tr>
<td>h或&ndash;help</td>
<td>在线帮助</td>
</tr>
<tr>
<td>i或&ndash;interfaces</td>
<td>显示网络界面信息表单</td>
</tr>
<tr>
<td>l或&ndash;listening</td>
<td>显示监控中的服务器的Socket</td>
</tr>
<tr>
<td>M或&ndash;masquerade</td>
<td>显示伪装的网络连线</td>
</tr>
<tr>
<td>n或&ndash;numeric</td>
<td>直接使用IP地址，而不通过域名服务器</td>
</tr>
<tr>
<td>N或&ndash;netlink或&ndash;symbolic</td>
<td>显示网络硬件外围设备的符号连接名称</td>
</tr>
<tr>
<td>o或&ndash;timers</td>
<td>显示计时器</td>
</tr>
<tr>
<td>p或&ndash;programs</td>
<td>显示正在使用Socket的程序识别码和程序名称</td>
</tr>
<tr>
<td>r或&ndash;route</td>
<td>显示Routing Table</td>
</tr>
<tr>
<td>s或&ndash;statistics</td>
<td>显示网络工作信息统计表</td>
</tr>
<tr>
<td>t或&ndash;tcp</td>
<td>显示TCP传输协议的连线状况</td>
</tr>
<tr>
<td>u或&ndash;udp</td>
<td>显示UDP传输协议的连线状况</td>
</tr>
<tr>
<td>v或&ndash;verbose</td>
<td>显示指令执行过程</td>
</tr>
<tr>
<td>V或&ndash;version</td>
<td>显示版本信息</td>
</tr>
<tr>
<td>w或&ndash;raw</td>
<td>显示RAW传输协议的连线状况</td>
</tr>
<tr>
<td>x或&ndash;unix</td>
<td>此参数的效果和指定&rdquo;-A unix&quot;参数相同</td>
</tr>
<tr>
<td>-ip或&ndash;inet</td>
<td>此参数的效果和指定&rdquo;-A inet&quot;参数相同</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 列出所有占用端口</span>
netstat -ntlp

<span style="color:#75715e"># 显示所有网络状况</span>
netstat -a

<span style="color:#75715e"># 显示所有tcp网络状况</span>
netstat -at

<span style="color:#75715e"># 显示所有udp网络状况</span>
netstat -au

<span style="color:#75715e"># 配合grep命令查看某个端口被占用情况</span>
netstat -ap | grep <span style="color:#ae81ff">8080</span>
</code></pre></div><h2 id="kill">kill</h2>
<p>结束程序，kill 命令只支持进程id杀死，不支持进程名称。</p>
<h4 id="进程信号">进程信号</h4>
<table>
<thead>
<tr>
<th>信号</th>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>HUP</td>
<td>挂起</td>
</tr>
<tr>
<td>2</td>
<td>INT</td>
<td>中断</td>
</tr>
<tr>
<td>3</td>
<td>QUIT</td>
<td>结束运行</td>
</tr>
<tr>
<td>9</td>
<td>KILL</td>
<td>无条件终止</td>
</tr>
<tr>
<td>11</td>
<td>SEGV</td>
<td>段错误</td>
</tr>
<tr>
<td>15</td>
<td>TERM</td>
<td>尽可能终止</td>
</tr>
<tr>
<td>17</td>
<td>STOP</td>
<td>无条件停止运行，但不终止</td>
</tr>
<tr>
<td>18</td>
<td>TSTP</td>
<td>停止或暂停，但继续在后台运行</td>
</tr>
<tr>
<td>19</td>
<td>CONT</td>
<td>在STOP或TSTP之后恢复执行</td>
</tr>
</tbody>
</table>
<p>注：程序进程 id 可通过 <code>top</code> 等命令查看。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 杀死 pid 为88 进程，不带参数默认等价 kill -15</span>
kill <span style="color:#ae81ff">88</span>

<span style="color:#75715e"># 无条件终止进程，以下是等价，可以用进程名称信号</span>
kill -KILL <span style="color:#ae81ff">88</span>
kill -9 <span style="color:#ae81ff">88</span>

<span style="color:#75715e"># 显示信号</span>
kill -l

<span style="color:#75715e"># 杀死指定用户的所有进程</span>
kill -u nginx
</code></pre></div><h2 id="killall">killall</h2>
<p>杀死进程，可以杀死多个进程，比 <code>kill</code> 要强大, 支持通过进程名称杀死, 还支持通配符。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 杀死以tcp进程名称开头的所有进程</span>
killall tcp*
</code></pre></div><hr>
<h1 id="用户管理">用户管理</h1>
<h2 id="useradd">useradd</h2>
<p>给系统添加新用户</p>
<p>注：</p>
<ul>
<li>在创建新用户时如果不指定具体的值，就会使用系统那些默认值。</li>
<li>在创建新用户时如果未指定密码，需要使用 <code>passwd</code> 命令进行更改。</li>
</ul>
<h4 id="useradd-命令行参数">useradd 命令行参数</h4>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-c comment</td>
<td>给新用户添加备注</td>
</tr>
<tr>
<td>-d home_dir</td>
<td>为主目录指定一个名字（如果不想用登录名作为主目录名的话）</td>
</tr>
<tr>
<td>-e expire_date</td>
<td>用YYYY-MM-DD格式指定一个账户过期的日期</td>
</tr>
<tr>
<td>-f inactive_days</td>
<td>指定这个账户密码过期后多少天这个账户被禁用；0表示密码已过期就立即禁用，1表示禁用这个功能</td>
</tr>
<tr>
<td>-g initial_group</td>
<td>指定用户登录组的GID或组名</td>
</tr>
<tr>
<td>-G group</td>
<td>指定用户除登录组之外所属的一个或多个附加组</td>
</tr>
<tr>
<td>-k</td>
<td>必须和-m一起使用，将/etc/skel目录的内容复制到用户的HOME目录</td>
</tr>
<tr>
<td>-m</td>
<td>创建用户的HOME目录</td>
</tr>
<tr>
<td>-M</td>
<td>不创建用户的HOME目录（当默认设置里要求创建时才使用这个选项）</td>
</tr>
<tr>
<td>-n</td>
<td>创建一个与用户登录名同名的新租</td>
</tr>
<tr>
<td>-r</td>
<td>创建系统账户</td>
</tr>
<tr>
<td>-p passwd</td>
<td>为用户账户指定默认密码 (需要使用openssl把明文进行加密后设置，否则无效)</td>
</tr>
<tr>
<td>-s shell</td>
<td>指定默认的登录shell</td>
</tr>
<tr>
<td>-u uid</td>
<td>为账户指定唯一的UID</td>
</tr>
</tbody>
</table>
<h4 id="更改默认值参数">更改默认值参数</h4>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-b default_home</td>
<td>更改默认的创建用户HOME目录的位置</td>
</tr>
<tr>
<td>-e expiration_date</td>
<td>更改默认的心账户的过期日期</td>
</tr>
<tr>
<td>-f inactive</td>
<td>更改默认的心用户从密码过期到账户被禁用的天数</td>
</tr>
<tr>
<td>-g group</td>
<td>更改默认的组名称或GID</td>
</tr>
<tr>
<td>-s shell</td>
<td>更改默认的登录shell</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># -D, 查看默认值</span>
useradd -D
<span style="color:#75715e"># 输出：</span>
GROUP<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>                <span style="color:#75715e"># 新用户会被添加到GID为100的公共组</span>
HOME<span style="color:#f92672">=</span>/home               <span style="color:#75715e"># 新用户的HOME目录将位于 /home/loginname</span>
INACTIVE<span style="color:#f92672">=</span>-1              <span style="color:#75715e"># 新用户账户密码在过期后不会被禁用</span>
EXPIRE<span style="color:#f92672">=</span>                  <span style="color:#75715e"># 新用户账户未被设置过期日期</span>
SHELL<span style="color:#f92672">=</span>/bin/bash          <span style="color:#75715e"># 新用户账户将bash shell作为默认shell</span>
SKEL<span style="color:#f92672">=</span>/etc/skel           <span style="color:#75715e"># 系统会将/etc/skel目录下的内容复制到用户的HOME目录下</span>
CREATE_MAIL_SPOOL<span style="color:#f92672">=</span>yes    <span style="color:#75715e"># 系统为该用户账户在mail目录下创建一个用于接收邮件的文件</span>


<span style="color:#75715e"># 创建一个 test 用户, -m 创建 /home/test 目录</span>
useradd -m test

<span style="color:#75715e"># 创建一个用户并设置密码</span>
useradd -m test <span style="color:#75715e"># 不指定-p，因为需要加密那样很麻烦</span>
passwd test <span style="color:#75715e"># 通过passwd修改指定用户密码</span>
</code></pre></div><p>添加新用户后可以执行 <code>cat /etc/passwd</code> 查看用户列表。</p>
<h2 id="userdel">userdel</h2>
<p>删除用户</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 删除用户，默认会从 /etc/passwd 文件中删除用户信息，而不会删除系统中属于该账户的任何文件</span>
userdel 用户名

<span style="color:#75715e"># -r 用来删除用户目录， 之前创建的 /home/用户名 就不存在了, 使用-r参数需要小心，要检查是否有重要文件。</span>
userdel -r 用户名
</code></pre></div><h2 id="passwd">passwd</h2>
<p>修改用户密码, 只有 <code>root</code> 用户才有权限修改别人的密码。</p>
<p>使用 <code>passwd</code> 一般用于修改单个用户密码，如果想批量修改那么需要 <code>chpasswd</code> 命令。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 如果不指定用户名，修改的是自己当前用户密码， 回车后输入新密码</span>
passwd

<span style="color:#75715e"># 修改指定用户密码，比如test用户</span>
passwd test
</code></pre></div><h2 id="chpasswd">chpasswd</h2>
<p>类似 <code>passwd</code> 命令也是用于修改用户密码，但它支持批量修改用户。</p>
<p><code>chpasswd</code> 命令从标准输入自动读取登录名和密码对（由冒号分割）列表，给密码加密。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 利用输入重定向从文本中读取</span>
chpasswd &lt; users.txt

<span style="color:#75715e"># 从标准输入读取</span>
echo <span style="color:#e6db74">&#39;test:fff33300..a&#39;</span> | chpasswd
</code></pre></div><p>user.txt 内容：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">test:helloworld0123..
test1:fff33300..
admin:youyouyou00..11
</code></pre></div><h2 id="chsh">chsh</h2>
<p><code>chsh</code> 命令用于修改默认用户登录 shell。</p>
<p>修改后重新启动Shell即可生效（exit/logout），或重新启动系统。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 必须使用完整路径，不能使用shell名</span>
chsh -s /bin/sh
</code></pre></div><p>查看当前 <code>Shell</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo $SHELL <span style="color:#75715e"># /bin/bash</span>
</code></pre></div><p>列出当前所有已安装的Shell</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /etc/shells
<span style="color:#75715e"># /bin/bash</span>
<span style="color:#75715e"># /bin/csh</span>
<span style="color:#75715e"># /bin/dash</span>
<span style="color:#75715e"># /bin/ksh</span>
<span style="color:#75715e"># /bin/sh</span>
<span style="color:#75715e"># /bin/tcsh</span>
<span style="color:#75715e"># /bin/zsh</span>
</code></pre></div><h2 id="chfn">chfn</h2>
<p>主要用于更改账号的个人信息。这些信息保存在 <code>/etc/passwd</code> 下。</p>
<p>默认情况下如果不提供参数将进入问答式逐一设置。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-f</td>
<td>真实姓名</td>
</tr>
<tr>
<td>-h</td>
<td>家中电话</td>
</tr>
<tr>
<td>-o</td>
<td>办公地址</td>
</tr>
<tr>
<td>-p</td>
<td>办公室电话</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 修改 root 账号信息</span>
chfn root
<span style="color:#75715e"># Changing finger information for root.</span>
<span style="color:#75715e"># Name [xiejiahe]:</span> 
<span style="color:#75715e"># Office [ZhuHai]:</span> 
<span style="color:#75715e"># Office Phone [13xxxxxxxxx]:</span> 
<span style="color:#75715e"># Home Phone [13xxxxxxxxx]:</span> 
</code></pre></div><h4 id="修改真实姓名">修改真实姓名</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">chfn -f root
</code></pre></div><h2 id="usermod">usermod</h2>
<p><code>usermod</code> 命令是用于账号修改工具中最强大的一个，它能用来修改 <code>/etc/passwd</code> 文件中的大部分字段。</p>
<p>注意：确保需要修改的用户已下线。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-l</td>
<td>修改用户账号的登录名</td>
</tr>
<tr>
<td>-p</td>
<td>修改账号的密码</td>
</tr>
<tr>
<td>-L</td>
<td>锁定账号，使用户无法登录</td>
</tr>
<tr>
<td>-U</td>
<td>解除锁定，使用户能登录</td>
</tr>
<tr>
<td>-l</td>
<td>修改用户账号的登录名</td>
</tr>
<tr>
<td>-d</td>
<td>修改用户登录时的目录</td>
</tr>
<tr>
<td>-c</td>
<td>修改用户备注信息</td>
</tr>
<tr>
<td>-s</td>
<td>修改用户登录时默认shell</td>
</tr>
<tr>
<td>-u</td>
<td>修改用户的UID</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 将 root 登录名修改为 root123</span>
usermod -l root root123

<span style="color:#75715e"># 锁定 test 账号</span>
usermod -L test

<span style="color:#75715e"># 当用户登录时目录为 /etc 下</span>
usermod -d /etc root

<span style="color:#75715e"># 修改UID</span>
usermod -u <span style="color:#ae81ff">888</span> root
</code></pre></div><h2 id="users">users</h2>
<p>显示当前登录系统的所有用户的用户列表</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">users
<span style="color:#75715e"># xiejiahe</span>
<span style="color:#75715e"># root</span>
<span style="color:#75715e"># admin</span>
</code></pre></div><h2 id="who">who</h2>
<p>显示当前所有用户登录信息</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 显示当前登录系统的用户</span>
who
xiejiahe console  Jun <span style="color:#ae81ff">15</span> 21:38
xiejiahe ttys001  Jun <span style="color:#ae81ff">15</span> 21:44
xiejiahe ttys002  Jun <span style="color:#ae81ff">15</span> 21:44
xiejiahe ttys003  Jun <span style="color:#ae81ff">15</span> 21:44
xiejiahe ttys004  Jun <span style="color:#ae81ff">15</span> 21:44
xiejiahe ttys005  Jun <span style="color:#ae81ff">15</span> 21:44

<span style="color:#75715e"># 显示登录账号名和总人数</span>
who -q

<span style="color:#75715e"># 显示上次系统启动时间</span>
who -b  <span style="color:#75715e"># reboot   ~        Jun 15 21:38</span>
</code></pre></div><h2 id="w">w</h2>
<p>查看当前登入系统的用户信息, 有哪些用户正在登陆, 以及他们正在执行的程序。</p>
<p>此命令与 <code>who</code> 相似，默认情况下比 <code>who</code> 命令输出内容更详细。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">w
<span style="color:#75715e"># 输出</span>
 22:44:33 up <span style="color:#ae81ff">748</span> days, 14:16,  <span style="color:#ae81ff">1</span> user,  load average: 0.04, 0.03, 0.05
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     pts/0    183.11.111.11    22:40    1.00s  0.03s  0.00s w
</code></pre></div><h2 id="last">last</h2>
<p>显示用户最近登录信息</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">last <span style="color:#75715e"># root     pts/0        183.58.247.64    Sun Jan  5 13:57 - 14:28  (00:30)</span>

<span style="color:#75715e"># 指定显示条目数</span>
last -n <span style="color:#ae81ff">1</span>
</code></pre></div><h2 id="su">su</h2>
<p>切换到其他用户。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 切换到 admin 身份</span>
su admin

<span style="color:#75715e"># -c 执行完指令后切换回原身份</span>
su -c ls admin

<span style="color:#75715e"># 可以通过以下查找当前系统用户列表</span>
cat /etc/passwd
</code></pre></div><h2 id="whoami">whoami</h2>
<p>显示自身的用户名称, 此命令等价于 <code>id -un</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">% whoami <span style="color:#75715e"># xiejiahe</span>
</code></pre></div><hr>
<h1 id="环境变量">环境变量</h1>
<h2 id="printenv">printenv</h2>
<p>列出全局环境变量, 有个 <code>env</code> 命令很像，但 <code>printenv</code> 可以打印变量的值。</p>
<p>普及：所有系统环境变量都是大写字母，用于区分普通用户的环境变量。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 列出所有全局环境变量</span>
printenv

<span style="color:#75715e"># 也可以显示指定全局环境变量的值, 等价于 echo $HOME</span>
printenv HOME <span style="color:#75715e"># /root</span>
</code></pre></div><h2 id="set">set</h2>
<p>列出所有全局变量、局部变量和普通用户定义的变量，按照字母顺序对结果进行排序。</p>
<p>注意：所有系统全局变量都是大写，用户定义的环境变量全部采用小写，这是标准规范。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">set
<span style="color:#75715e"># OPTIND=1</span>
<span style="color:#75715e"># OSTYPE=linux-gnu</span>
<span style="color:#75715e"># PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span>
<span style="color:#75715e"># PIPESTATUS=([0]=&#34;0&#34;)</span>
<span style="color:#75715e"># ...</span>
</code></pre></div><h2 id="export">export</h2>
<p>导出环境变量, 可以把一个局部变量导出成全局环境变量</p>
<p>注意：export 只有在当前Shell有效，退出后将失效</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 先声明一个局部环境变量</span>
my_var<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Hello&#39;</span>
<span style="color:#75715e"># 然后将其导出全局环境变量</span>
export my_var
</code></pre></div><h2 id="unset">unset</h2>
<p>删除环境变量</p>
<p>注意：unset 只在当前shell删除环境变量，假如环境变量设置在 <code>~/.bash_profile</code> 等文件中用户重新启动依然生效。如果是在子进程删除全局环境变量只在子进程有效，不会影响父进程。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 删除 HOME 环境变量，前面不需要带 $ 符号</span>
unset HOME
</code></pre></div><hr>
<h1 id="压缩解压">压缩、解压</h1>
<h2 id="zip">zip</h2>
<p>归档数据，将目录或文件归档为 <code>.zip</code> 格式， zip 不是Linux中的标准归档工具。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 归档文件</span>
zip README.zip README.md

<span style="color:#75715e"># 归档目录需要 -r 递归处理</span>
zip -r temp.zip temp

<span style="color:#75715e"># -S 包含系统隐藏文件</span>
zip -r -S temp.zip temp

<span style="color:#75715e"># 指定归档效率 1-9</span>
zip -r -9 temp.zip temp 
</code></pre></div><h2 id="unzip">unzip</h2>
<p>提取 <code>zip</code> 归档的文件或目录</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 将 demo.zip 提取到当前目录下</span>
unzip demo.zip

<span style="color:#75715e"># 列表 demo.zip 文件内容，但不提取</span>
unzip -v demo.zip

<span style="color:#75715e"># -d 指定将文件提取到 src 目录下</span>
unzip demo.zip -d src
</code></pre></div><h2 id="gzip">gzip</h2>
<p>GNU 压缩/解压工具，用 Lempel-Ziv编码，格式为 <code>.gz</code>, 压缩后原文件将被删除</p>
<p>注意：gzip 不能用于压缩整个目录, 只能用于压缩文件, 如果需要压缩整个目录可以考虑使用 <a href="#zip">zip</a> 命令。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 压缩 README.md 文件, 压缩完成后 README.md 文件会被删除</span>
gzip README.md <span style="color:#75715e"># README.md.gz</span>

<span style="color:#75715e"># 递归压缩目录下的所有文件, 每个文件都会被压缩为 .gz 然后删除</span>
gzip -r ./logs

<span style="color:#75715e"># 加 -v 显示压缩执行过程</span>
gzip -rv ./logs

<span style="color:#75715e"># 压缩 .tar 后缀文件</span>
gzip -r src.tar  <span style="color:#75715e"># 压缩后为 src.tar.gz</span>

<span style="color:#75715e"># -d 解压gzip压缩后的文件，解压后 .gz 文件会被删除</span>
gzip -d README.md.gz
gzip -dr ./logs <span style="color:#75715e"># 或者递归解压目录下所有 .gz</span>
</code></pre></div><h2 id="bzip2">bzip2</h2>
<p>采用 Burrows-Wheeler块排序文本压缩算法和霍夫曼编码，将文件压缩成 <code>.bz2</code> 格式，也可用于解压 <code>.bz2</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 压缩 README.md 文件</span>
bzip2 README.md     <span style="color:#75715e"># 不保留源文件 README.md.bz2</span>
bzip2 -k README.md  <span style="color:#75715e"># -k 保留源文件</span>


<span style="color:#75715e"># 解压</span>
bzip2 -d README.md.bz2  <span style="color:#75715e"># 源文件将被删除</span>
bzip2 -dk README.md.bz2  <span style="color:#75715e"># -k 保留源文件</span>
bzip -dt README.md.bz2 <span style="color:#75715e"># -t --test 测试解压, 实际不解压，模拟整个解压过程</span>
</code></pre></div><h2 id="tar">tar</h2>
<p>归档数据，是Linux中标准归档工具。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-A</td>
<td>将一个已有tar归档文件追加到另一个已有tar归档文件</td>
</tr>
<tr>
<td>-c</td>
<td>创建一个新的tar归档文件</td>
</tr>
<tr>
<td>-d</td>
<td>检查归档文件和文件系统的不同之处</td>
</tr>
<tr>
<td>-r</td>
<td>追加文件到已有tar归档文件结尾</td>
</tr>
<tr>
<td>-t</td>
<td>列出已有tar归档文件的内容</td>
</tr>
<tr>
<td>-u</td>
<td>将比tar归档文件中已有的同名文件新的文件追加到该tar归档文件中</td>
</tr>
<tr>
<td>-x</td>
<td>从已有的tar归档文件中提取文件</td>
</tr>
<tr>
<td>-f</td>
<td>输出结果到文件或设备file</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># -c 创建一个归档文件</span>
tar -cvf demo.tar src/

<span style="color:#75715e"># -x 提取归档文件内容</span>
tar -xvf demo.tar
tar -xvf demo.tar.gz <span style="color:#75715e"># tar命令是可以提取 gzip 压缩后的文件</span>
</code></pre></div><hr>
<h1 id="加解密">加解密</h1>
<h2 id="md5sum">md5sum</h2>
<p>计算和校验文件报文摘要</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 计算文件md5</span>
mmd5sum README.md <span style="color:#75715e"># d41d8cd98f00b204e9800998ecf8427e  README.md</span>

<span style="color:#75715e"># 校验文件, 查看文件是否被篡改过</span>
md5sum README.md &gt; README.md5 <span style="color:#75715e"># 计算文件md5并保存在 README.md5 , 保存的文件名和后缀可以随意命名</span>
md5sum -c README.md5 <span style="color:#75715e"># -c 从指定的文件读取md5并校验, 会从当前目录寻找 README.md</span>
</code></pre></div><h2 id="base64">base64</h2>
<p>base64 编码/解码文件或标准输入输出</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 编码字符串</span>
printf <span style="color:#e6db74">&#34;hello world&#34;</span>|base64 <span style="color:#75715e"># aGVsbG8gd29ybGQ=</span>

<span style="color:#75715e"># 解码字符串</span>
printf aGVsbG8gd29ybGQ<span style="color:#f92672">=</span>|base64 -d <span style="color:#75715e"># hello world</span>

<span style="color:#75715e"># 编码文件, 将结果保存在 decode.txt</span>
base64 README.md &gt; decode.txt

<span style="color:#75715e"># 从标准输入中读取已经进行base64编码的内容进行解码</span>
base64 -d decode.txt
</code></pre></div><hr>
<h1 id="网络">网络</h1>
<h2 id="ssh">ssh</h2>
<p>远程连接服务器工具</p>
<p>命令：<code>ssh [-p port]  [user@]hostname [command]</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 最简单的连接方式</span>
ssh root@192.168.0.0

<span style="color:#75715e"># 指定端口号连接</span>
ssh -p <span style="color:#ae81ff">23</span> root@192.168.0.0

<span style="color:#75715e"># 执行远程服务器命令, 比如创建目录</span>
ssh root@192.168.0.0 <span style="color:#e6db74">&#34;mkdir -p /home/test&#34;</span>

<span style="color:#75715e"># 在远程服务器执行本地脚本</span>
ssh root@192.168.0.0 &lt; shell.sh
</code></pre></div><h2 id="wget">wget</h2>
<p>用于从网络下载文件到本地</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 下载某个文件</span>
wget https://www.xiejiahe.com/robots.txt

<span style="color:#75715e"># 指定下载后文件名</span>
wget -O ro.txt https://www.xiejiahe.com/robots.txt

<span style="color:#75715e"># 断开续传，一般用于大文件，防止重新下载</span>
wget -c https://www.xiejiahe.com/robots.txt

<span style="color:#75715e"># 使用后台下载, 对于大文件非常有用</span>
wget -b https://www.xiejiahe.com/robots.txt
tail -f wget-log   <span style="color:#75715e"># 查看后台下载进度</span>
</code></pre></div><h2 id="curl">curl</h2>
<p><code>curl</code> 是一个非常强大的网络传输工具, 利用URL规则在命令行下工作的文件传输工具。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-s, &ndash;silent</td>
<td>不输出错误和进度信息, 只显示正常结果</td>
</tr>
<tr>
<td>-o, &ndash;output</td>
<td>将结果输出到文件中</td>
</tr>
<tr>
<td>-O, &ndash;remote-name</td>
<td>下载文件到本地，并将URL最后部分当做文件名</td>
</tr>
<tr>
<td>-L</td>
<td>HTTP请求跟随服务器重定向</td>
</tr>
<tr>
<td>-I, -head</td>
<td>显示HTTP响应报文</td>
</tr>
<tr>
<td>-H</td>
<td>设置请求头</td>
</tr>
<tr>
<td>-X</td>
<td>指定HTTP请求方法</td>
</tr>
<tr>
<td>-d</td>
<td>HTTP请求实体内容</td>
</tr>
<tr>
<td>&ndash;cookie</td>
<td>指定发送cookie</td>
</tr>
<tr>
<td>-v</td>
<td>打印整个传输过程</td>
</tr>
<tr>
<td>-F, &ndash;form</td>
<td>上传文件</td>
</tr>
<tr>
<td>-u</td>
<td>指定用户名密码授权</td>
</tr>
<tr>
<td>&ndash;progress</td>
<td>显示进度条</td>
</tr>
</tbody>
</table>
<p>注意：参数不分前后</p>
<h4 id="不传递任何参数只打印http响应内容">不传递任何参数只打印HTTP响应内容</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl https://github.com/xjh22222228/linux-manual
</code></pre></div><h4 id="-s-不输出错误和进度信息-只显示正常结果">-s 不输出错误和进度信息, 只显示正常结果</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -s https://github.com/xjh22222228/linux-manual
</code></pre></div><h4 id="-o-指定文件名下载到本地等价于-wget">-o 指定文件名下载到本地，等价于 wget</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 将响应内容保存到 1.txt 文件</span>
curl https://github.com/xjh22222228/linux-manual -o 1.txt
</code></pre></div><h4 id="-o-下载文件到本地-并将url最后部分当做文件名">-O 下载文件到本地, 并将URL最后部分当做文件名</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 文件名为 linux-manual</span>
curl https://github.com/xjh22222228/linux-manual -O
</code></pre></div><h4 id="--progress-显示进度条">&ndash;progress 显示进度条</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl https://github.com/xjh22222228/linux-manual --progress
</code></pre></div><h4 id="-l-http请求跟随服务器重定向">-L HTTP请求跟随服务器重定向</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -L https://github.com/xjh22222228/linux-manual
</code></pre></div><h4 id="-i-或--head-显示http响应报文-不打印响应内容">-I 或 -head 显示HTTP响应报文, 不打印响应内容</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -I https://github.com/xjh22222228/linux-manual
</code></pre></div><h4 id="-h-设置请求头">-H 设置请求头</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -H <span style="color:#e6db74">&#39;Content-Type: application/json&#39;</span> -H <span style="color:#e6db74">&#39;Content-Type: application/json&#39;</span> https://github.com/xjh22222228/linux-manual
</code></pre></div><h4 id="-x-指明http请求方法">-X 指明HTTP请求方法</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -X POST https://github.com/xjh22222228/linux-manual
</code></pre></div><h4 id="-d-要发送的实体内容">-d 要发送的实体内容</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -X POST -d <span style="color:#e6db74">&#39;{&#34;key&#34;:&#34;value&#34;}&#39;</span> https://github.com/xjh22222228/linux-manual
</code></pre></div><h4 id="--cookie-http请求时携带的cookie信息">&ndash;cookie HTTP请求时携带的cookie信息</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl --cookie <span style="color:#e6db74">&#34;age=18;name=xjh&#34;</span> https://github.com/xjh22222228/linux-manual
</code></pre></div><h4 id="-v-打印整个传输过程">-v 打印整个传输过程</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -v https://github.com/xjh22222228/linux-manual
</code></pre></div><h4 id="-f-上传文件默认以post方法请求">-F 上传文件，默认以POST方法请求</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># file 是字段名, =@ 必须存在</span>
curl https://example.com/upload -F <span style="color:#e6db74">&#34;file=@/home/demo.png&#34;</span>
</code></pre></div><h4 id="-u-请求授权">-u 请求授权</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -u root:password ftp://demo/README.md
</code></pre></div><h2 id="scp">scp</h2>
<p>加密的方式在本地主机和远程主机之间复制文件</p>
<p>注：需要有读写权限，否则会无法操作。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 从远程主机下载文件到本地</span>
scp root@192.168.0.100:/root/file.zip /home/file.zip

<span style="color:#75715e"># 从远程主机下载目录到本地，需要 -r 递归</span>
scp -r root@192.168.0.100:/root/dir  /home/dir

<span style="color:#75715e"># 从本地主机上传文件到远程主机</span>
scp /home/file.zip root@192.168.0.100:/root/file.zip

<span style="color:#75715e"># # 从本地主机上传目录到远程主机，需要 -r 递归</span>
scp -r /home/dir root@192.168.0.100:/root/dir
</code></pre></div><h2 id="rsync">rsync</h2>
<p><code>rsync</code> 命令是一个远程数据同步工具，可通过LAN/WAN快速同步多台主机间的文件。rsync使用所谓的“rsync算法”来使本地和远程两个主机之间的文件达到同步，这个算法只传送两个文件的不同部分，而不是每次都整份传送，因此速度相当快。</p>
<p><code>rsync</code> 非常强大，可以用来替代 <code>cp</code> / <code>mv</code> / <code>scp</code> 等命令。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-r</td>
<td>递归拷贝子目录</td>
</tr>
<tr>
<td>-a</td>
<td>递归拷贝子目录，但同步元数据信息，比如修改时间，创建时间，权限等</td>
</tr>
<tr>
<td>-n</td>
<td>模拟执行结果</td>
</tr>
<tr>
<td>-v</td>
<td>显示执行过程</td>
</tr>
<tr>
<td>-z</td>
<td>压缩传输</td>
</tr>
<tr>
<td>&ndash;exclude</td>
<td>排除文件</td>
</tr>
<tr>
<td>&ndash;include</td>
<td>包含文件</td>
</tr>
<tr>
<td>&ndash;progress</td>
<td>显示传输进度信息</td>
</tr>
<tr>
<td>&ndash;link-dest</td>
<td>指定增量备份的基准目录</td>
</tr>
</tbody>
</table>
<p>source 有没有斜杠影响同步结果：</p>
<ul>
<li>有斜杠 - dst目录下只有 source 文件</li>
<li>无斜杠 - dst目录包含source目录</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 无斜杠, dst 目录下只有 source目录</span>
rsync -r source dst

<span style="color:#75715e"># 有斜杠, dst 目录下包含 source 所有文件，没有source目录</span>
rsync -r source/ dst
</code></pre></div><h4 id="本地同步文件">本地同步文件</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># -r 表示递归拷贝子目录，将 source 拷贝到 dst 目录下</span>
rsync -r source dst <span style="color:#75715e"># dst 目录下就有 source</span>

<span style="color:#75715e"># 可以将多个source 拷贝到指定目录下</span>
rsync -r source1 source2 dst

<span style="color:#75715e"># -a替代-r, 同步元数据信息，比如修改时间，创建时间，权限等</span>
rsync -a source dst
</code></pre></div><h4 id="远程同步文件">远程同步文件</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 本地同步到远程, 本地 docs 目录同步到远程 home/docs 下</span>
rsync -rv ~/docs root@192.168.0.0:/home/docs

<span style="color:#75715e"># 远程同步到本地, 将远程 /home/docs 目录同步到本地 ~/docs 下</span>
rsync -rv root@192.168.0.0:/home/docs ~/docs
</code></pre></div><h4 id="增量备份">增量备份</h4>
<p><code>rsync</code> 最大的特点就是支持增量备份，所谓增量备份指的是只同步有变动的文件。</p>
<p><code>rsync</code> 默认就是增量备份的，但可以添加 <code>--link-dest</code> 参数指定基准目录进行比较，找出有变动的文件。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># --link-dest 后面跟着基准目录，然后会跟 source 进行一一比较，找出变动的文件进行同步</span>
rsync -a --link-dest compare source dest
</code></pre></div><h4 id="其他用法">其他用法</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 排除文件</span>
rsync -r --exclude<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;.git&#34;</span> source dst
<span style="color:#75715e"># 大括号指定多个排除模式</span>
rsync -r --exclude<span style="color:#f92672">=</span><span style="color:#f92672">{</span><span style="color:#e6db74">&#34;.git&#34;</span>, <span style="color:#e6db74">&#34;.svn&#34;</span><span style="color:#f92672">}</span> source dst


<span style="color:#75715e"># 包含文件</span>
rsync -r --include<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src/&#34;</span> source dst
<span style="color:#75715e"># 大括号指定多个包含模式</span>
rsync -r --include<span style="color:#f92672">=</span><span style="color:#f92672">{</span><span style="color:#e6db74">&#34;src/&#34;</span>, <span style="color:#e6db74">&#34;tests/&#34;</span><span style="color:#f92672">}</span> source dst
</code></pre></div><hr>
<h1 id="磁盘">磁盘</h1>
<h2 id="df">df</h2>
<p>查看已挂载的磁盘使用情况。</p>
<h4 id="描述">描述</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Filesystem</td>
<td>设备的设备位置文件</td>
</tr>
<tr>
<td>Size</td>
<td>能容纳多少个1024字节大小的块</td>
</tr>
<tr>
<td>Used</td>
<td>已用了多少个1024字节大小的块</td>
</tr>
<tr>
<td>Avail</td>
<td>还有多少个1024字节大小的块可用</td>
</tr>
<tr>
<td>Use%</td>
<td>已用空间所占的比例</td>
</tr>
<tr>
<td>Mounted on</td>
<td>设备挂载到了哪个挂载点上</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 显示每个有数据的已挂载文件系统</span>
<span style="color:#75715e"># Filesystem     1K-blocks    Used Available Use% Mounted on</span>
<span style="color:#75715e"># /dev/vda1       41151808 1853208  37185168   5% /</span>
df

<span style="color:#75715e"># 格式化大小，以kb以上进行显示</span>
df -h

<span style="color:#75715e"># 查看全部文件系统信息</span>
df -a
</code></pre></div><h2 id="du">du</h2>
<p>显示文件或目录所占用的磁盘空间</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 默认显示当前目录的所有文件、目录、和子目录的磁盘使用情况</span>
du

<span style="color:#75715e"># 查看指定文件所占用磁盘空间</span>
du README.md

<span style="color:#75715e"># 查看指定目录所占用磁盘空间, 输出的最后一行是累计总大小</span>
du src

<span style="color:#75715e"># -h 以K，M，G为单位，提高信息的可读性。</span>
du -h src  <span style="color:#75715e"># 20K    src</span>

<span style="color:#75715e"># -s 只显示总大小，列出最后累计的值</span>
du -s src

<span style="color:#75715e"># 显示当前所有已列出文件总大小</span>
du -c
</code></pre></div><hr>
<h1 id="包管理">包管理</h1>
<h2 id="yum">yum</h2>
<p>基于RPM的软件包管理器, 特点安装快捷，命令简洁好记。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 安装</span>
yum install 包名

<span style="color:#75715e"># 指定 -y 安装时自动全部 yes</span>
yum -y install 包名

<span style="color:#75715e"># 查找包</span>
yum search 包名

<span style="color:#75715e"># 显示所有已安装的包</span>
yum list

<span style="color:#75715e"># 升级包</span>
yum update 包名

<span style="color:#75715e"># 只删除软件包而保留配置文件和数据文件</span>
yum remove 包名

<span style="color:#75715e"># 删除软件和它的所有配置文件</span>
yum erase 包名

<span style="color:#75715e"># 清除缓存</span>
yum clean all

<span style="color:#75715e"># 显示安装包信息</span>
yum info 包名

<span style="color:#75715e"># 检查可更新的包程序</span>
yum check-update
</code></pre></div><h2 id="apt-get">apt-get</h2>
<p><code>apt-get命令</code> 是Debian Linux发行版中的APT软件包管理工具。所有基于Debian的发行都使用这个包管理系统。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 安装一个docker软件</span>
apt-get install docker

<span style="color:#75715e"># 卸载软件，保留配置文件</span>
apt-get remove docker

<span style="color:#75715e"># 卸载软件并删除配置文件</span>
apt-get –purge remove docker

<span style="color:#75715e"># 更新所有已安装的软件包</span>
apt-get upgrade

<span style="color:#75715e"># 删除软件备份，主要用来释放空间</span>
apt-get clean
</code></pre></div><hr>
<h1 id="其他">其他</h1>
<h2 id="目录名称含义">目录名称含义</h2>
<table>
<thead>
<tr>
<th>目录名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>/</td>
<td>虚拟目录的根目录，通常不会在这里存储文件</td>
</tr>
<tr>
<td>/bin</td>
<td>二进制目录，存放许多用户级的GNU工具</td>
</tr>
<tr>
<td>/boot</td>
<td>启动目录，存放启动文件</td>
</tr>
<tr>
<td>/dev</td>
<td>设备目录，Linux在这里创建设备节点</td>
</tr>
<tr>
<td>/etc</td>
<td>系统配置文件目录</td>
</tr>
<tr>
<td>/home</td>
<td>主目录，Linux在这里创建用户目录</td>
</tr>
<tr>
<td>/lib</td>
<td>库目录，存放系统和应用程序的库文件</td>
</tr>
<tr>
<td>/media</td>
<td>媒体目录，可移动媒体设备的常用挂载点</td>
</tr>
<tr>
<td>/mnt</td>
<td>挂载目录，另一个可移动媒体设备的常用挂载点</td>
</tr>
<tr>
<td>/opt</td>
<td>可选目录，常用于存放第三方软件包和数据文件</td>
</tr>
<tr>
<td>/proc</td>
<td>进程目录，存放现有硬件及当期进程的相关信息</td>
</tr>
<tr>
<td>/root</td>
<td>ROOT用户的主目录</td>
</tr>
<tr>
<td>/sbin</td>
<td>系统二进制目录，存放许多GNU管理员级工具</td>
</tr>
<tr>
<td>/run</td>
<td>运行目录，存放系统运作时的运行时数据</td>
</tr>
<tr>
<td>/srv</td>
<td>服务目录，存放本地服务的相关文件</td>
</tr>
<tr>
<td>/sys</td>
<td>系统目录，存放系统硬件信息的相关文件</td>
</tr>
<tr>
<td>/tmp</td>
<td>临时目录，可以在该目录中创建和删除临时工作文件</td>
</tr>
<tr>
<td>/usr</td>
<td>用户二进制目录，大量用户级的GNU工具和数据文件都存储在这里</td>
</tr>
<tr>
<td>/var</td>
<td>可变目录，用以存放经常变化的文件，比如日志文件</td>
</tr>
</tbody>
</table>
<h2 id="重定向输入和输出">重定向输入和输出</h2>
<h4 id="输出重定向">输出重定向</h4>
<p>将命令输出的内容发送到一个文件中叫做 <code>输出重定向</code> 。 使用 <code>&gt;</code> 大于号。</p>
<p>下面展示了几个例子</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 例子一：</span>
echo <span style="color:#e6db74">&#34;Hello World&#34;</span> &gt; log.txt

<span style="color:#75715e"># 例子二：</span>
ps -ef &gt; ps.txt

<span style="color:#75715e"># 例子三：</span>
history &gt; a.txt
</code></pre></div><p>有时不想覆盖文件而是追加内容，比如日志，可以使用 <code>&gt;&gt;</code> 2个大于号。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo <span style="color:#e6db74">&#34;H&#34;</span> &gt;&gt; log.txt
</code></pre></div><h4 id="输入重定向">输入重定向</h4>
<p>和输出重定向正好相反，将文件的内容定向到命令。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 统计input.txt文本行数</span>
wc -l &lt; input.txt <span style="color:#75715e"># 等价于 wc -l input.txt</span>
</code></pre></div><p>还有一种叫内联重定向，比较少见，但也挺有用。 使用2个 <code>&lt;&lt;</code> 小于号。然后跟着一个开头标记和结尾标记。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 统计行数，输出2</span>
wc -l <span style="color:#e6db74">&lt;&lt; EOF
</span><span style="color:#e6db74">第一行
</span><span style="color:#e6db74">第二行
</span><span style="color:#e6db74">EOF</span>
</code></pre></div><p>开头标记必须和结尾标记一致，标记名称可以是任何字符串。</p>
<p>下面这个也是可以的。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 输出2</span>
wc -l <span style="color:#e6db74">&lt;&lt; Hello
</span><span style="color:#e6db74">第一行
</span><span style="color:#e6db74">第二行
</span><span style="color:#e6db74">Hello</span>
</code></pre></div><h2 id="管道">管道</h2>
<p>将一个命令的输出作为另一个命令的输入称为管道。 管道用 <code>|</code> 符号表示。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 将 ls 输出内容作为 wc 输入</span>
ls | wc

<span style="color:#75715e"># 执行一个脚本，这没有什么意义，只是一个例子</span>
echo <span style="color:#e6db74">&#34;./bash.sh&#34;</span> | bash
</code></pre></div><h2 id="echo">echo</h2>
<p>输出字符串或者变量</p>
<p>注: 一般情况下字符串不必加双引号, 如果包含转义字符就必须要加</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 在终端输出 Hello World</span>
echo <span style="color:#e6db74">&#34;Hello World&#34;</span>
echo Hello World    <span style="color:#75715e"># 也可以不加双引号</span>
echo <span style="color:#e6db74">&#34;Hello\nWorld&#34;</span> <span style="color:#75715e"># 必须加双引号, 否则无法转义</span>

<span style="color:#75715e"># 打印系统环境变量，如果变量不存在输出为空</span>
echo $PATH

<span style="color:#75715e"># &gt; 输出重定向，将内容输出到文件中</span>
echo Hello World &gt; 1.txt

<span style="color:#75715e"># -n 不换行, 默认情况下echo 是占一整行</span>
echo -n Hello; echo World
</code></pre></div><h2 id="date">date</h2>
<p>显示或设置系统时间日期</p>
<table>
<thead>
<tr>
<th>格式化符号</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>%%</td>
<td>百分号</td>
</tr>
<tr>
<td>%a</td>
<td>当地缩写的工作日名称（例如，Sun）</td>
</tr>
<tr>
<td>%A</td>
<td>当地完整的工作日名称（例如，Sunday）</td>
</tr>
<tr>
<td>%b</td>
<td>当地缩写的月份名称（例如，Jan）</td>
</tr>
<tr>
<td>%B</td>
<td>当地完整的月份名称（例如，January）</td>
</tr>
<tr>
<td>%c</td>
<td>当地的日期和时间（例如，Thu Mar  3 23:05:25 2005）</td>
</tr>
<tr>
<td>%C</td>
<td>世纪，和 <code>%Y</code> 类似，但是省略后两位（例如，20）</td>
</tr>
<tr>
<td>%d</td>
<td>一月中的一天（例如，01）</td>
</tr>
<tr>
<td>%D</td>
<td>日期，等价于 <code>%m/%d/%y</code></td>
</tr>
<tr>
<td>%e</td>
<td>一月中的一天，格式使用空格填充，等价于 <code>%_d</code></td>
</tr>
<tr>
<td>%F</td>
<td>完整的日期；等价于 <code>%+4Y-%m-%d</code></td>
</tr>
<tr>
<td>%g</td>
<td>ISO标准计数周的年份的最后两位数字</td>
</tr>
<tr>
<td>%G</td>
<td>ISO标准计数周的年份，通常只对 <code>%V</code> 有用</td>
</tr>
<tr>
<td>%h</td>
<td>等价于 <code>%b</code></td>
</tr>
<tr>
<td>%H</td>
<td>小时，范围（00..23）24小时制</td>
</tr>
<tr>
<td>%I</td>
<td>小时，范围（00..12）12小时制</td>
</tr>
<tr>
<td>%j</td>
<td>一年中的一天，范围（001..366）</td>
</tr>
<tr>
<td>%k</td>
<td>小时，使用空格填充，范围（0..23），等价于 <code>%_H</code></td>
</tr>
<tr>
<td>%l</td>
<td>小时，使用空格填充，范围（1..12），等价于 <code>%_I</code></td>
</tr>
<tr>
<td>%m</td>
<td>月，范围（01..12）</td>
</tr>
<tr>
<td>%M</td>
<td>分钟，范围（00..59）</td>
</tr>
<tr>
<td>%n</td>
<td>换行符</td>
</tr>
<tr>
<td>%N</td>
<td>纳秒，范围（000000000..000000000）</td>
</tr>
<tr>
<td>%p</td>
<td>用于表示当地的AM或PM，如果未知则为空白</td>
</tr>
<tr>
<td>%P</td>
<td>类似于 <code>%p</code> ，但用小写表示</td>
</tr>
<tr>
<td>%q</td>
<td>季度，范围（1..4）</td>
</tr>
<tr>
<td>%r</td>
<td>当地以12小时表示的时钟时间（例如，11:11:04 PM）</td>
</tr>
<tr>
<td>%R</td>
<td>24小时每分钟；等价于 <code>%H:%M</code></td>
</tr>
<tr>
<td>%s</td>
<td>自协调世界时1970年01月01日00时00分以来的秒数</td>
</tr>
<tr>
<td>%S</td>
<td>秒数，范围（00..60）</td>
</tr>
<tr>
<td>%t</td>
<td>水平制表符</td>
</tr>
<tr>
<td>%T</td>
<td>时间；等价于 <code>%H:%M:%S</code></td>
</tr>
<tr>
<td>%u</td>
<td>一周中的一天（1..7），1代表星期一</td>
</tr>
<tr>
<td>%U</td>
<td>一年中的第几周，周日作为一周的起始（00..53）</td>
</tr>
<tr>
<td>%V</td>
<td>ISO标准计数周，该方法将周一作为一周的起始（01..53）</td>
</tr>
<tr>
<td>%w</td>
<td>一周中的一天（0..6），0代表星期天</td>
</tr>
<tr>
<td>%W</td>
<td>一年中的第几周，周一作为一周的起始（00..53）</td>
</tr>
<tr>
<td>%x</td>
<td>当地的日期表示（例如，12/31/99）</td>
</tr>
<tr>
<td>%X</td>
<td>当地的时间表示（例如，23:13:48）</td>
</tr>
<tr>
<td>%y</td>
<td>年份后两位数字，范围（00..99）</td>
</tr>
<tr>
<td>%Y</td>
<td>年份</td>
</tr>
<tr>
<td>%z</td>
<td>+hhmm格式的数值化时区格式（例如，-0400）</td>
</tr>
<tr>
<td>%:z</td>
<td>+hh:mm格式的数值化时区格式（例如，-04:00）</td>
</tr>
<tr>
<td>%::z</td>
<td>+hh:mm:ss格式的数值化时区格式（例如，-04:00:00）</td>
</tr>
<tr>
<td>%:::z</td>
<td>数值化时区格式，相比上一个格式增加&rsquo;:&lsquo;以显示必要的精度（例如，-04，+05:30）</td>
</tr>
<tr>
<td>%Z</td>
<td>时区缩写（如EDT）</td>
</tr>
<tr>
<td>-</td>
<td>(连字符) 不要填充相应的字段。</td>
</tr>
<tr>
<td>_</td>
<td>(下划线) 使用空格填充相应的字段。</td>
</tr>
<tr>
<td>0</td>
<td>(数字0) 使用数字0填充相应的字段。</td>
</tr>
<tr>
<td>+</td>
<td>用数字0填充，未来年份大于4位数字则在前面加上'+'号。</td>
</tr>
<tr>
<td>^</td>
<td>允许的情况下使用大写。</td>
</tr>
<tr>
<td>#</td>
<td>允许的情况下将默认的大写转换为小写，默认的小写转换为大写。</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 显示当前时间</span>
date

<span style="color:#75715e"># 格式化当前时间</span>
date +<span style="color:#e6db74">&#34;%Y-%m-%d %H:%M.%S&#34;</span> <span style="color:#75715e"># 2020-07-01 00:00.00</span>

<span style="color:#75715e"># 设置系统时间</span>
date -s  <span style="color:#75715e"># 设置当前时间, 须root</span>
date -s <span style="color:#e6db74">&#34;2020-07-01 00:00:00&#34;</span> <span style="color:#75715e"># 设置指定时间</span>
</code></pre></div><h2 id="man">man</h2>
<p>查看指令帮助手册</p>
<p><strong>man 信息说明</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>NAME</td>
<td>显示命令名和一段简短的描述</td>
</tr>
<tr>
<td>SYNOPSIS</td>
<td>命令的语法</td>
</tr>
<tr>
<td>CONFI GURATION</td>
<td>命令配置信息</td>
</tr>
<tr>
<td>DESCRIPTION</td>
<td>命令的一般性描述</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>命令选项描述</td>
</tr>
<tr>
<td>EXIT STATUS</td>
<td>命令的退出状态指示</td>
</tr>
<tr>
<td>RETURN VALUE</td>
<td>命令的返回值</td>
</tr>
<tr>
<td>ERRORS</td>
<td>命令的错误消息</td>
</tr>
<tr>
<td>ENVIRONMENT</td>
<td>描述所使用的环境变量</td>
</tr>
<tr>
<td>FILES</td>
<td>命令用到的文件</td>
</tr>
<tr>
<td>VERSIONS</td>
<td>命令的版本信息</td>
</tr>
<tr>
<td>CONFORMING TO</td>
<td>命令所遵从的标准</td>
</tr>
<tr>
<td>NOTES</td>
<td>其他有帮助的资料</td>
</tr>
<tr>
<td>BUGS</td>
<td>提供提交BUG的途径</td>
</tr>
<tr>
<td>EXAMPLE</td>
<td>展示命令的用法</td>
</tr>
<tr>
<td>AUTHORS</td>
<td>命令开发人员的信息</td>
</tr>
<tr>
<td>COPYRIGHT</td>
<td>命令源代码的版权状况</td>
</tr>
<tr>
<td>SEE ALSO</td>
<td>与该命令类型的其他命令</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 查看 ls 指令帮助手册</span>
man ls

<span style="color:#75715e"># 可以通过数字来阅读某一部分内容, 比如阅读第一部分</span>
man <span style="color:#ae81ff">1</span> ls

<span style="color:#75715e"># -a 在所有手册中查找</span>
man -a ls

<span style="color:#75715e"># -k, 搜索关键字, 如果忘记了完整的命令可以通过关键字搜索出来，比如 nginx</span>
man -k ngi
</code></pre></div><h2 id="sleep">sleep</h2>
<p>将目前动作延迟一段时间, 通常用于脚本当中</p>
<p>时间参数, 这是可选的，默认s：</p>
<ul>
<li>s 秒</li>
<li>m 分钟</li>
<li>h 小时</li>
<li>d 天</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 5秒后输出 Hello</span>
sleep 5s; echo Hello
</code></pre></div><p>下面是一段 Shell 脚本， 延迟10秒后再去请求</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
sleep 10s

curl https://www.xiejiahe.com/
</code></pre></div><h2 id="history">history</h2>
<p>列出当前系统使用过的命令，默认保存1000条, 通常保存在 <code>~/.bash_history</code> 文件中，注意的是只有在Shell退出时才写入到文件。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 列出当前使用过的命令</span>
history

<span style="color:#75715e"># 指定要显示的条数</span>
history <span style="color:#ae81ff">50</span>

<span style="color:#75715e"># 清空历史命令</span>
history -c

<span style="color:#75715e"># -a 强制写入到 ~/.bash_history 文件中而不用等shell退出才写入</span>
history -a
</code></pre></div><h2 id="xargs">xargs</h2>
<p>给命令传递参数的一个过滤器，也是组合多个命令的一个工具, <code>将左侧的标准输出放进右侧标准输入</code>。</p>
<p>此命令可以将多次操作简便为一次操作。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 统计代码</span>
find -name <span style="color:#e6db74">&#34;*.js&#34;</span> | xargs wc -l <span style="color:#75715e"># 等价于 wc -l a.js b.js c.js ...</span>

<span style="color:#75715e"># 批量下载文件</span>
cat download.txt | xargs wget
</code></pre></div><h2 id="cal">cal</h2>
<p>显示当前日历</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cal
<span style="color:#75715e"># 输出</span>
     June <span style="color:#ae81ff">2020</span>        
Su Mo Tu We Th Fr Sa  
    <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">5</span>  <span style="color:#ae81ff">6</span>  
 <span style="color:#ae81ff">7</span>  <span style="color:#ae81ff">8</span>  <span style="color:#ae81ff">9</span> <span style="color:#ae81ff">10</span> <span style="color:#ae81ff">11</span> <span style="color:#ae81ff">12</span> <span style="color:#ae81ff">13</span>  
<span style="color:#ae81ff">14</span> <span style="color:#ae81ff">15</span> <span style="color:#ae81ff">16</span> <span style="color:#ae81ff">17</span> <span style="color:#ae81ff">18</span> <span style="color:#ae81ff">19</span> <span style="color:#ae81ff">20</span>  
<span style="color:#ae81ff">21</span> <span style="color:#ae81ff">22</span> <span style="color:#ae81ff">23</span> <span style="color:#ae81ff">24</span> <span style="color:#ae81ff">25</span> <span style="color:#ae81ff">26</span> <span style="color:#ae81ff">27</span>  
<span style="color:#ae81ff">28</span> <span style="color:#ae81ff">29</span> <span style="color:#ae81ff">30</span>

<span style="color:#75715e"># 显示临近3个月, -3 是固定不能更改数字</span>
cal -3

<span style="color:#75715e"># 打印今天是今年的第几天</span>
cal -j
<span style="color:#75715e"># 输出：今天日期会高亮显示</span>
       October <span style="color:#ae81ff">2020</span>          
 Su  Mo  Tu  We  Th  Fr  Sa  
                <span style="color:#ae81ff">275</span> <span style="color:#ae81ff">276</span> <span style="color:#ae81ff">277</span>  
<span style="color:#ae81ff">278</span> <span style="color:#ae81ff">279</span> <span style="color:#ae81ff">280</span> <span style="color:#ae81ff">281</span> <span style="color:#ae81ff">282</span> <span style="color:#ae81ff">283</span> <span style="color:#ae81ff">284</span>  
<span style="color:#ae81ff">285</span> <span style="color:#ae81ff">286</span> <span style="color:#ae81ff">287</span> <span style="color:#ae81ff">288</span> <span style="color:#ae81ff">289</span> <span style="color:#ae81ff">290</span> <span style="color:#ae81ff">291</span>  
<span style="color:#ae81ff">292</span> <span style="color:#ae81ff">293</span> <span style="color:#ae81ff">294</span> <span style="color:#ae81ff">295</span> <span style="color:#ae81ff">296</span> <span style="color:#ae81ff">297</span> <span style="color:#ae81ff">298</span>  
<span style="color:#ae81ff">299</span> <span style="color:#ae81ff">300</span> <span style="color:#ae81ff">301</span> <span style="color:#ae81ff">302</span> <span style="color:#ae81ff">303</span> <span style="color:#ae81ff">304</span> <span style="color:#ae81ff">305</span>

<span style="color:#75715e"># 打印今年1月-12月份日历</span>
cal -y
</code></pre></div><h2 id="expr">expr</h2>
<p>执行数学运算，expr 命令比较鸡助，通常在 shell 脚本当中看到。但在shell脚本也不建议用。</p>
<p>expr 后面每个表达式都要有一个空格，否则是不合法。</p>
<p>注：expr 只支持整数运算，这是一个限制。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 3</span>
expr <span style="color:#ae81ff">1</span> + <span style="color:#ae81ff">2</span>
expr 1+2 <span style="color:#75715e"># 这样是不行的</span>

<span style="color:#75715e"># 在浮点数计算时会丢失小数， 这里等于 2</span>
expr <span style="color:#ae81ff">5</span> / <span style="color:#ae81ff">2</span>
</code></pre></div><h2 id="bc">bc</h2>
<p>bash计算器，用来执行数学运算， 与 <code>expr</code> 不同，因为 <code>expr</code> 命令不支持浮点数运算，所以可以用 <code>bc</code> 命令替代。</p>
<p>bash计算器实际上是一种编程语言，它允许在命令行中输入浮点表达式，然后解释并计算该表达式。最后返回结果。</p>
<p><code>bc</code> 大多数情况下是在 shell 脚本中使用。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 敲 bc 然后回车进入交互式， 输入 quit 退出</span>
bc

scale<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>  <span style="color:#75715e"># 保留几位小数，默认是0</span>
<span style="color:#ae81ff">5</span> / <span style="color:#ae81ff">2</span>
<span style="color:#75715e"># 输出 2.50</span>
</code></pre></div><h2 id="timeout">timeout</h2>
<p>在指定时长范围内执行命令，并在规定时间结束后停止进程。</p>
<p>意思是在规定时间内必须完成，否则停止进程。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 模拟超过3秒, 因为sleep阻塞5秒所以在3秒内无法完成，则停止进程</span>
timeout <span style="color:#ae81ff">3</span> sleep <span style="color:#ae81ff">5</span>

<span style="color:#75715e"># 比如打包, 1分钟内要打包完成，否则停止进程</span>
timeout <span style="color:#ae81ff">60</span> npm run build
</code></pre></div><h2 id="exit">exit</h2>
<p>退出当前登录Shell, 可以使用快捷键退出 <code>Ctrl + D</code>。</p>
<p>等价命令 <code>logout</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">exit
</code></pre></div><h2 id="vim">vim</h2>
<p>vi 编辑器是Unix系统最初的编辑器，在GNU项目将vi编辑器移植到开源世界时，他们决定对其做一些改进，开发人员也就将它重命名为 <code>vi improved</code>。</p>
<p><code>vim</code>(vi improved) 是 <code>vi</code> 的升级版，所以只需要知道 <code>vim</code> 即可， 是一个非强大的文本编辑器，学习成本不低，需要长期使用才能记牢每一个指令操作。</p>
<p>这是一份速查表，使用的时候注意区分大小写。</p>
<p>vim 的快捷键指令非常多，只列出一些实用性便于记忆。</p>
<p><strong>打开文件</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 最简单的打开文件方式, 如果文件不存在会开辟一段新的缓冲区域来编辑。</span>
vim README.md

<span style="color:#75715e"># 打开文件并定位到最后一行</span>
vim + README.md

<span style="color:#75715e"># 打开文件并定位到某一行, +号后面指定行数</span>
vim +100 README.md

<span style="color:#75715e"># 打开多个文件</span>
<span style="color:#75715e"># :bn 切换下一个文件</span>
<span style="color:#75715e"># :bp 切换上一个文件</span>
<span style="color:#75715e"># :ls 列出所有已经打开的文件</span>
<span style="color:#75715e"># :b2 切换到第2个文件, 2是个任意数字</span>
vim 1.txt 2.txt
</code></pre></div><p><strong>光标定位插入</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>在当前光标位置插入</td>
</tr>
<tr>
<td>I</td>
<td>在当前光标行第一个字符插入</td>
</tr>
<tr>
<td>a</td>
<td>在当前光标后一个字符插入</td>
</tr>
<tr>
<td>A</td>
<td>光标到当前行最后一个字符插入</td>
</tr>
<tr>
<td>H</td>
<td>光标到第一行第一个字符 (是以终端大小来计算，不是原文本的第一行)</td>
</tr>
<tr>
<td>M</td>
<td>光标到中间第一行 (是以终端大小来计算)</td>
</tr>
<tr>
<td>L</td>
<td>光标到最后行第一个字符 (是以终端大小来计算)</td>
</tr>
<tr>
<td>E</td>
<td>将光标定位到右边的空格</td>
</tr>
<tr>
<td>o</td>
<td>在当前光标下一行插入</td>
</tr>
<tr>
<td>O</td>
<td>在当前光标上一行插入</td>
</tr>
<tr>
<td>:n</td>
<td>将光标定位到 n 行</td>
</tr>
</tbody>
</table>
<p><strong>撤销</strong>
| 快捷键      | 描述              |
| &mdash;&mdash;&mdash;- |&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; |
| u   | 撤销上一次编辑内容 |
| U   | 撤销当前光标整行内容 |
| Ctrl + r   | 还原初始文件状态 |
| e!  | 撤销所有修改，恢复打开文件时的状态 |</p>
<p><strong>删除</strong>
| 快捷键      | 描述              |
| &mdash;&mdash;&mdash;- |&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; |
| dd   | 删除当前行 |
| dj   | 删除上一行 |
| dk   | 删除下一行 |
| :1,$d   | 删除所有行 |</p>
<p><strong>拷贝/粘贴</strong>
| 快捷键      | 描述              |
| &mdash;&mdash;&mdash;- |&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; |
| yy  | 拷贝当前行 |
| p   | 在当前光标粘贴上一次拷贝的内容 |</p>
<p><strong>搜索</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>:/text</td>
<td>从上往下查找 text，按 <code>n</code> 向下搜索, 按 <code>N</code> 想前搜索</td>
</tr>
<tr>
<td>:?text</td>
<td>从下往上查找 text，按 <code>n</code> 向下搜索, 按 <code>N</code> 想前搜索</td>
</tr>
</tbody>
</table>
<p><strong>替换</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>:s/old/new</td>
<td>找到old第一次出现的地方并用new来替换</td>
</tr>
<tr>
<td>:s/old/new/g</td>
<td>找到所有old出现的地方并用new来替换(当前屏幕)</td>
</tr>
<tr>
<td>:%s/old/new/g</td>
<td>替换整个文件中的所有old</td>
</tr>
<tr>
<td>:%s/old/new/gc</td>
<td>替换整个文件中的所有old，但在每次出现时提示</td>
</tr>
<tr>
<td>:n,ms/old/new/g</td>
<td>替换行号n和m之间的所有old</td>
</tr>
</tbody>
</table>
<p><strong>退出</strong></p>
<p>先按 <code>ESC</code> 键然后再操作后面的快捷键。</p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>:w</td>
<td>写入但不退出</td>
</tr>
<tr>
<td>:w!</td>
<td>强制保存，但不退出</td>
</tr>
<tr>
<td>:q!</td>
<td>退出但不保存</td>
</tr>
<tr>
<td>:wq</td>
<td>保存写入内容并退出</td>
</tr>
<tr>
<td>:w file</td>
<td>将当前文件内容保存到 file 文件中</td>
</tr>
<tr>
<td>:qa!</td>
<td>退出所有文件并不做保存，比如打开了多个文件</td>
</tr>
</tbody>
</table>
<p><strong>设置</strong></p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>:set ignorecase</td>
<td>忽略大小写查找</td>
</tr>
<tr>
<td>:set noignorecase</td>
<td>不忽略大小写查找</td>
</tr>
<tr>
<td>:set hlsearch</td>
<td>高亮搜索结果</td>
</tr>
<tr>
<td>:set nohlsearch</td>
<td>关闭高亮搜索显示</td>
</tr>
<tr>
<td>:set hlsearch</td>
<td>高亮搜索结果</td>
</tr>
<tr>
<td>:set number</td>
<td>显示行号</td>
</tr>
<tr>
<td>:set nonumber</td>
<td>不显示行号</td>
</tr>
</tbody>
</table>
<h2 id="basename">basename</h2>
<p>打印目录或者文件的基本名称。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 输出：index.html</span>
basename /www/index.html

<span style="color:#75715e"># 输出：www</span>
basename /www/
</code></pre></div><h2 id="read">read</h2>
<p><code>read</code> 命令从标准输入（键盘）或另一个文件描述符中接收输入。 通常用在Shell脚本, 在收到输入后，read命令会将数据存放进一个变量。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 最简单用法, data 是自定义变量名，用户输入内容并回车后结束</span>
read data <span style="color:#75715e"># echo $data  会打印用户输入的内容</span>

<span style="color:#75715e"># -p 指定提示符</span>
read -p 确认要删除吗？ data

<span style="color:#75715e"># -t 指定超时（秒）</span>
read -t <span style="color:#ae81ff">5</span> -p 确认要删除吗？ data

<span style="color:#75715e"># —s 隐藏用户输入，比如密码，实际上是将文本颜色设置成背景颜色一样</span>
read -s -p <span style="color:#e6db74">&#34;请输入您的密码：&#34;</span> data
</code></pre></div><h2 id="tee">tee</h2>
<p>tee命令相当于管道的一个T型接头，它将从<code>STDIN标准输入</code>过来的数据同时发往两处，一处是<code>STDOUT</code>，另一处是tee命令指定的文件名。</p>
<p>tee 命令通常用于 shell 脚本当中。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># date内容打印到屏幕上并且重定向输出到 date.txt 文件中</span>
date | tee date.txt

<span style="color:#75715e"># -a 以追加方式，默认情况下会覆盖输出文件内容</span>
date | tee -a date.txt
</code></pre></div><p><code>tee</code> 命令只是一个语法糖，如果不用 <code>tee</code> 可以这样做：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 1、将date结果保存到 var 变量中</span>
var<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>date<span style="color:#66d9ef">)</span>
<span style="color:#75715e"># 2、将结果打印到屏幕上 STDOUT</span>
echo $var
<span style="color:#75715e"># 3、将结果重定向到文件</span>
echo $var &gt; date.txt
</code></pre></div><h2 id="clear">clear</h2>
<p>用于清除当前终端所有信息，本质上只是向后翻了一页，往上滚动还能看到之前的操作信息</p>
<p>注：笔者用得比较多的是 <code>command + K</code> 可以完全清除终端所有操作信息。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">clear
</code></pre></div><hr>
<h2 id="致谢">致谢</h2>
<p>部分内容从《Linux命令行与Shell脚本编程大全》 进行整理出来， 如有错误，欢迎指正，谢谢！</p>
<p><a href="#">⬆  回顶部</a></p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>linjinbao </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://linjinbao.github.io/2020/2020-11-15-linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/>https://linjinbao.github.io/2020/2020-11-15-linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">返回</a></span> · 
                <span><a href="https://linjinbao.github.io">主页</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://linjinbao.github.io/2020/2020-11-10-nginx%E6%8B%A6%E6%88%AA%E7%A9%BAreffer/" class="prev" rel="prev" title="nginx拦截空reffer"><i class="iconfont icon-left"></i>&nbsp;nginx拦截空reffer</a>
         
        
        <a href="https://linjinbao.github.io/2020/2020-11-16-containerd%E6%89%8B%E5%8A%A8%E5%AF%BC%E5%85%A5%E9%95%9C%E5%83%8F/" class="next" rel="next" title="containerd手动导入镜像">containerd手动导入镜像&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
		  
		  
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'c0ed0ca0e3d9634636f2',
    clientSecret: '6d1b474de5dd1f935ee25f81965974928704e193',
    repo: 'linjinbao.github.io',
    owner: 'linjinbao',
    admin: ['linjinbao'],
    id: location.pathname, 
    distractionFreeMode: false 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>


    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2021</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://linjinbao.github.io">linjinbao</a>  </span> 
         

         
		 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
