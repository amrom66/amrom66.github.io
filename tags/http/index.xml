<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>http on 打工人日记</title>
    <link>https://linjinbao.github.io/tags/http/</link>
    <description>Recent content in http on 打工人日记</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 25 Nov 2019 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://linjinbao.github.io/tags/http/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>nginx代理出来的页面使用IE无法加载png问题</title>
      <link>https://linjinbao.github.io/2019/20191125nginx-dai-li-chu-lai-de-ye-mian-shi-yong-ie-wu-fa-jia-zai-png-wen-ti/</link>
      <pubDate>Mon, 25 Nov 2019 00:00:00 +0000</pubDate>
      
      <guid>https://linjinbao.github.io/2019/20191125nginx-dai-li-chu-lai-de-ye-mian-shi-yong-ie-wu-fa-jia-zai-png-wen-ti/</guid>
      <description>nginx代理出来的页面使用IE无法加载png问题 问题描述： 使用nginx对站点进行反代，其他都正常，但是有个png图片无法加载。排查了情况如下： 1. 其他浏览器正常 2. IE在内网正常，访问原始地址 3. IE在外网异常，访问nginx代理后地址
问题分析： 检查F12，发现图片状态码200，已经加载出来，但是没有渲染出来，推测是由于安全策略问题；比对内网header和外网访问header，发现区别在外网多了个X-Content-Type-Options: nosniff，估计问题在这。
问题解决： 在nginx代理中，去掉add_header X-Content-Type-Options nosniff;配置项 问题解决
总结 X-Content-Type-Options nosniff是什么？
如果服务器发送响应头 &amp;ldquo;X-Content-Type-Options: nosniff&amp;rdquo;，则 script 和 styleSheet 元素会拒绝包含错误的 MIME 类型的响应。这是一种安全功能，有助于防止基于 MIME 类型混淆的攻击。
如果通过 styleSheet 参考检索到的响应中接收到 &amp;ldquo;nosniff&amp;rdquo; 指令，则 Windows Internet Explorer 不会加载“stylesheet”文件，除非 MIME 类型匹配 &amp;ldquo;text/css&amp;rdquo;。
如果通过 script 参考检索到的响应中接收到 &amp;ldquo;nosniff&amp;rdquo; 指令，则 Internet Explorer 不会加载“script”文件，除非 MIME 类型匹配以下值之一：
&amp;#34;application/ecmascript&amp;#34; &amp;#34;application/javascript&amp;#34; &amp;#34;application/x-javascript&amp;#34; &amp;#34;text/ecmascript&amp;#34; &amp;#34;text/javascript&amp;#34; &amp;#34;text/jscript&amp;#34; &amp;#34;text/x-javascript&amp;#34; &amp;#34;text/vbs&amp;#34; &amp;#34;text/vbscript&amp;#34; 解决方案： 1. 使用image/png明确页面内容，同时启用X-Content-Type-Options: nosniff，禁用浏览器类型猜测行为 2. 禁用X-Content-Type-Options: nosniff，允许浏览器猜测行为</description>
    </item>
    
    <item>
      <title>nginx代理出来的页面使用IE无法加载png问题</title>
      <link>https://linjinbao.github.io/2019/nginx%E4%BB%A3%E7%90%86%E5%87%BA%E6%9D%A5%E7%9A%84%E9%A1%B5%E9%9D%A2%E4%BD%BF%E7%94%A8ie%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BDpng%E9%97%AE%E9%A2%98/</link>
      <pubDate>Mon, 25 Nov 2019 00:00:00 +0000</pubDate>
      
      <guid>https://linjinbao.github.io/2019/nginx%E4%BB%A3%E7%90%86%E5%87%BA%E6%9D%A5%E7%9A%84%E9%A1%B5%E9%9D%A2%E4%BD%BF%E7%94%A8ie%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BDpng%E9%97%AE%E9%A2%98/</guid>
      <description>nginx代理出来的页面使用IE无法加载png问题 问题描述： 使用nginx对站点进行反代，其他都正常，但是有个png图片无法加载。排查了情况如下：
 其他浏览器正常 IE在内网正常，访问原始地址 IE在外网异常，访问nginx代理后地址  问题分析： 检查F12，发现图片状态码200，已经加载出来，但是没有渲染出来，推测是由于安全策略问题；比对内网header和外网访问header，发现区别在外网多了个X-Content-Type-Options: nosniff，估计问题在这。
问题解决： 在nginx代理中，去掉add_header X-Content-Type-Options nosniff;配置项 问题解决
总结 X-Content-Type-Options nosniff是什么？
如果服务器发送响应头 &amp;ldquo;X-Content-Type-Options: nosniff&amp;rdquo;，则 script 和 styleSheet 元素会拒绝包含错误的 MIME 类型的响应。这是一种安全功能，有助于防止基于 MIME 类型混淆的攻击。
如果通过 styleSheet 参考检索到的响应中接收到 &amp;ldquo;nosniff&amp;rdquo; 指令，则 Windows Internet Explorer 不会加载“stylesheet”文件，除非 MIME 类型匹配 &amp;ldquo;text/css&amp;rdquo;。
如果通过 script 参考检索到的响应中接收到 &amp;ldquo;nosniff&amp;rdquo; 指令，则 Internet Explorer 不会加载“script”文件，除非 MIME 类型匹配以下值之一：
&amp;quot;application/ecmascript&amp;quot;&amp;quot;application/javascript&amp;quot;&amp;quot;application/x-javascript&amp;quot;&amp;quot;text/ecmascript&amp;quot;&amp;quot;text/javascript&amp;quot;&amp;quot;text/jscript&amp;quot;&amp;quot;text/x-javascript&amp;quot;&amp;quot;text/vbs&amp;quot;&amp;quot;text/vbscript&amp;quot;解决方案：
 使用image/png明确页面内容，同时启用X-Content-Type-Options: nosniff，禁用浏览器类型猜测行为 禁用X-Content-Type-Options: nosniff，允许浏览器猜测行为  </description>
    </item>
    
  </channel>
</rss>